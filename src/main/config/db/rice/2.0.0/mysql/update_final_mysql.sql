--
-- Copyright 2005-2012 The Kuali Foundation
--
-- Licensed under the Educational Community License, Version 2.0 (the "License");
-- you may not use this file except in compliance with the License.
-- You may obtain a copy of the License at
--
-- http://www.opensource.org/licenses/ecl2.php
--
-- Unless required by applicable law or agreed to in writing, software
-- distributed under the License is distributed on an "AS IS" BASIS,
-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-- See the License for the specific language governing permissions and
-- limitations under the License.
--

-- 
-- mysql-2010-04-15.sql
-- 


ALTER TABLE KRNS_SESN_DOC_T ADD (OBJ_ID VARCHAR(36))
;
ALTER TABLE KRNS_SESN_DOC_T ADD (VER_NBR DECIMAL(8) DEFAULT 0)
;




-- 
-- mysql-2010-05-03.sql
-- 


ALTER TABLE KRIM_PND_GRP_ATTR_DATA_T ADD (ACTV_IND VARCHAR(1) DEFAULT 'Y'
                                        , EDIT_FLAG VARCHAR(1) DEFAULT 'N')
;


-- 
-- mysql-2010-05-12.sql
-- 


ALTER TABLE KREN_CHNL_SUBSCRP_T ADD OBJ_ID VARCHAR(36)
;
ALTER TABLE KREN_CNTNT_TYP_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_CHNL_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_NTFCTN_MSG_DELIV_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_NTFCTN_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_PRIO_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_PRODCR_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_RECIP_LIST_T ADD OBJ_ID VARCHAR(36)
;
ALTER TABLE KREN_SNDR_T ADD OBJ_ID VARCHAR(36)
;
ALTER TABLE KREN_RECIP_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_RVWER_T ADD OBJ_ID VARCHAR(36) 
;
ALTER TABLE KREN_CHNL_SUBSCRP_T ADD VER_NBR DECIMAL(8)
;
ALTER TABLE KREN_RECIP_LIST_T ADD VER_NBR DECIMAL(8)
;
ALTER TABLE KREN_SNDR_T ADD VER_NBR DECIMAL(8)
;
ALTER TABLE KREN_RECIP_T ADD VER_NBR DECIMAL(8)
;

-- 
-- mysql-2011-03-23.sql
-- 


UPDATE KREW_DOC_TYP_T SET POST_PRCSR='org.kuali.rice.edl.framework.workflow.EDocLitePostProcessor'
WHERE POST_PRCSR='org.kuali.rice.kew.edl.EDocLitePostProcessor'
;

UPDATE KREW_DOC_TYP_T SET POST_PRCSR='org.kuali.rice.edl.framework.workflow.EDocLiteDatabasePostProcessor'
WHERE POST_PRCSR='org.kuali.rice.kew.edl.EDLDatabasePostProcessor'
;

UPDATE KREW_DOC_TYP_T SET PARNT_ID='2681' WHERE DOC_TYP_NM='TravelAccountMaintenanceDocument'
;
UPDATE KREW_DOC_TYP_T SET PARNT_ID='2681' WHERE DOC_TYP_NM='FiscalOfficerMaintenanceDocument'
;
UPDATE KREW_DOC_TYP_T SET PARNT_ID='2681' WHERE DOC_TYP_NM='TravelRequest'
;


-- 
-- mysql-2011-04-28.sql
-- 


--
-- KULRICE-4794
-- The following statements will change the DOC_HDR_ID from a decimal to a VARCHAR(40) on various tables. 
--

ALTER TABLE KREW_ACTN_ITM_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_ACTN_RQST_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_ACTN_TKN_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_APP_DOC_STAT_TRAN_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40)
;
ALTER TABLE KREW_DOC_HDR_CNTNT_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_HDR_EXT_DT_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_HDR_EXT_FLT_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_HDR_EXT_LONG_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_HDR_EXT_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_HDR_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_NTE_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_TYP_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40)
;
ALTER TABLE KREW_EDL_DMP_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_EDL_FLD_DMP_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_INIT_RTE_NODE_INSTN_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_OUT_BOX_ITM_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_RMV_RPLC_DOC_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_RMV_RPLC_GRP_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_RMV_RPLC_RULE_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_RTE_NODE_INSTN_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_RULE_T CHANGE DOC_HDR_ID DOC_HDR_ID VARCHAR(40)
;

--
-- The following statements will change the ORGN_DOC_ID and DEST_DOC_ID 
-- from a decimal to a VARCHAR(40) on the KREW_DOC_LNK_T table 
--

ALTER TABLE KREW_DOC_LNK_T CHANGE ORGN_DOC_ID ORGN_DOC_ID VARCHAR(40) NOT NULL
;
ALTER TABLE KREW_DOC_LNK_T CHANGE DEST_DOC_ID DEST_DOC_ID VARCHAR(40) NOT NULL
;


-- 
-- mysql-2011-05-09.sql
-- 


--
--
-- DDL for KRMS repository
--
--

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';


-- -----------------------------------------------------
-- Table `KRMS_TYP_T`
-- -----------------------------------------------------

CREATE  TABLE IF NOT EXISTS `KRMS_TYP_T` (
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `SRVC_NM` VARCHAR(200) NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`TYP_ID`) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_PROP_T`
-- -----------------------------------------------------

CREATE  TABLE IF NOT EXISTS `KRMS_PROP_T` (
  `PROP_ID` VARCHAR(40) NOT NULL ,
  `DESC_TXT` VARCHAR(100) NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `DSCRM_TYP_CD` VARCHAR(10) NOT NULL ,
  `CMPND_OP_CD` VARCHAR(40) NULL ,
  `RULE_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`PROP_ID`) ,
  INDEX `KRMS_PROP_TI1` (`RULE_ID` ASC) ,
  INDEX `KRMS_PROP_FK2` (`TYP_ID` ASC) ,
  CONSTRAINT `KRMS_PROP_FK1`
    FOREIGN KEY (`RULE_ID` )
    REFERENCES `KRMS_RULE_T` (`RULE_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_PROP_FK2`
    FOREIGN KEY (`TYP_ID` )
    REFERENCES `KRMS_TYP_T` (`TYP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_RULE_T`
-- -----------------------------------------------------

CREATE  TABLE IF NOT EXISTS `KRMS_RULE_T` (
  `RULE_ID` VARCHAR(40) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `PROP_ID` VARCHAR(40) NOT NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  `DESCR_TXT` VARCHAR(4000) NULL ,
  PRIMARY KEY (`RULE_ID`) ,
  INDEX `KRMS_RULE_TI1` (`PROP_ID` ASC) ,
  CONSTRAINT `KRMS_RULE_FK1`
    FOREIGN KEY (`PROP_ID` )
    REFERENCES `KRMS_PROP_T` (`PROP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_T` (
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_ID`) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_AGENDA_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_AGENDA_T` (
  `AGENDA_ID` VARCHAR(40) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `INIT_AGENDA_ITM_ID` VARCHAR(40) NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`AGENDA_ID`) ,
  INDEX `KRMS_AGENDA_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_AGENDA_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_ATTR_DEFN_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_ATTR_DEFN_T` (
  `ATTR_DEFN_ID` VARCHAR(255) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `LBL` VARCHAR(40) NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `CMPNT_NM` VARCHAR(100) NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`ATTR_DEFN_ID`) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TYP_ATTR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TYP_ATTR_T` (
  `TYP_ATTR_ID` VARCHAR(40) NOT NULL ,
  `SEQ_NO` TINYINT NOT NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `ATTR_DEFN_ID` VARCHAR(255) NOT NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`TYP_ATTR_ID`) ,
  INDEX `KRMS_TYP_ATTR_TI1` (`ATTR_DEFN_ID` ASC) ,
  INDEX `KRMS_TYP_ATTR_TI2` (`TYP_ID` ASC) ,
  UNIQUE INDEX `KRMS_TYP_ATTR_TC1` (`TYP_ID` ASC, `ATTR_DEFN_ID` ASC) ,
  CONSTRAINT `KRMS_TYP_ATTR_FK1`
    FOREIGN KEY (`ATTR_DEFN_ID` )
    REFERENCES `KRMS_ATTR_DEFN_T` (`ATTR_DEFN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_TYP_ATTR_FK2`
    FOREIGN KEY (`TYP_ID` )
    REFERENCES `KRMS_TYP_T` (`TYP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_ACTN_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_ACTN_T` (
  `ACTN_ID` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(40) NULL ,
  `DESC_TXT` VARCHAR(4000) NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `RULE_ID` VARCHAR(40) NULL ,
  `SEQ_NO` TINYINT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`ACTN_ID`) ,
  INDEX `KRMS_ACTN_TI2` (`RULE_ID` ASC) ,
  INDEX `KRMS_ACTN_TI1` (`TYP_ID` ASC) ,
  UNIQUE INDEX `KRMS_ACTN_TC2` (`ACTN_ID` ASC, `RULE_ID` ASC, `SEQ_NO` ASC) ,
  INDEX `KRMS_ACTN_TI3` (`RULE_ID` ASC, `SEQ_NO` ASC) ,
  CONSTRAINT `KRMS_ACTN_FK1`
    FOREIGN KEY (`RULE_ID` )
    REFERENCES `KRMS_RULE_T` (`RULE_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_ACTN_ATTR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_ACTN_ATTR_T` (
  `ACTN_ATTR_DATA_ID` VARCHAR(40) NOT NULL ,
  `ACTN_ID` VARCHAR(40) NOT NULL ,
  `ATTR_DEFN_ID` VARCHAR(40) NOT NULL ,
  `ATTR_VAL` VARCHAR(400) NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`ACTN_ATTR_DATA_ID`) ,
  INDEX `KRMS_ACTN_ATTR_TI1` (`ACTN_ID` ASC) ,
  INDEX `KRMS_ACTN_ATTR_TI2` (`ATTR_DEFN_ID` ASC) ,
  CONSTRAINT `KRMS_ACTN_ATTR_FK1`
    FOREIGN KEY (`ACTN_ID` )
    REFERENCES `KRMS_ACTN_T` (`ACTN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_ACTN_ATTR_FK2`
    FOREIGN KEY (`ATTR_DEFN_ID` )
    REFERENCES `KRMS_ATTR_DEFN_T` (`ATTR_DEFN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_AGENDA_ITM_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_AGENDA_ITM_T` (
  `AGENDA_ITM_ID` VARCHAR(40) NOT NULL ,
  `RULE_ID` VARCHAR(40) NULL ,
  `SUB_AGENDA_ID` VARCHAR(40) NULL ,
  `AGENDA_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  `WHEN_TRUE` VARCHAR(40) NULL ,
  `WHEN_FALSE` VARCHAR(40) NULL ,
  `ALWAYS` VARCHAR(40) NULL ,
  PRIMARY KEY (`AGENDA_ITM_ID`) ,
  INDEX `KRMS_AGENDA_ITM_TI1` (`RULE_ID` ASC) ,
  INDEX `KRMS_AGENDA_ITM_TI2` (`AGENDA_ID` ASC) ,
  INDEX `KRMS_AGENDA_ITM_TI3` (`SUB_AGENDA_ID` ASC) ,
  INDEX `KRMS_AGENDA_ITM_TI4` (`WHEN_TRUE` ASC) ,
  INDEX `KRMS_AGENDA_ITM_TI5` (`WHEN_FALSE` ASC) ,
  INDEX `KRMS_AGENDA_ITM_TI6` (`ALWAYS` ASC) ,
  CONSTRAINT `KRMS_AGENDA_ITM_FK1`
    FOREIGN KEY (`RULE_ID` )
    REFERENCES `KRMS_RULE_T` (`RULE_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_AGENDA_ITM_FK2`
    FOREIGN KEY (`AGENDA_ID` )
    REFERENCES `KRMS_AGENDA_T` (`AGENDA_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_AGENDA_ITM_FK3`
    FOREIGN KEY (`SUB_AGENDA_ID` )
    REFERENCES `KRMS_AGENDA_T` (`AGENDA_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_AGENDA_ITM_FK4`
    FOREIGN KEY (`WHEN_TRUE` )
    REFERENCES `KRMS_AGENDA_ITM_T` (`AGENDA_ITM_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_AGENDA_ITM_FK5`
    FOREIGN KEY (`WHEN_FALSE` )
    REFERENCES `KRMS_AGENDA_ITM_T` (`AGENDA_ITM_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_AGENDA_ITM_FK6`
    FOREIGN KEY (`ALWAYS` )
    REFERENCES `KRMS_AGENDA_ITM_T` (`AGENDA_ITM_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_RULE_ATTR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_RULE_ATTR_T` (
  `RULE_ATTR_ID` VARCHAR(40) NOT NULL ,
  `RULE_ID` VARCHAR(40) NOT NULL ,
  `ATTR_DEFN_ID` VARCHAR(40) NOT NULL ,
  `ATTR_VAL` VARCHAR(400) NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`RULE_ATTR_ID`) ,
  INDEX `KRMS_RULE_ATTR_TI1` (`RULE_ID` ASC) ,
  INDEX `KRMS_RULE_ATTR_TI2` (`ATTR_DEFN_ID` ASC) ,
  CONSTRAINT `KRMS_RULE_ATTR_FK1`
    FOREIGN KEY (`RULE_ID` )
    REFERENCES `KRMS_RULE_T` (`RULE_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_RULE_ATTR_FK2`
    FOREIGN KEY (`ATTR_DEFN_ID` )
    REFERENCES `KRMS_ATTR_DEFN_T` (`ATTR_DEFN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_ATTR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_ATTR_T` (
  `CNTXT_ATTR_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `ATTR_VAL` VARCHAR(400) NULL ,
  `ATTR_DEFN_ID` VARCHAR(40) NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_ATTR_ID`) ,
  INDEX `KRMS_CNTXT_ATTR_TI1` (`CNTXT_ID` ASC) ,
  INDEX `KRMS_CNTXT_ATTR_TI2` (`ATTR_DEFN_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_ATTR_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_CNTXT_ATTR_FK2`
    FOREIGN KEY (`ATTR_DEFN_ID` )
    REFERENCES `KRMS_ATTR_DEFN_T` (`ATTR_DEFN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_VLD_ACTN_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_VLD_ACTN_T` (
  `CNTXT_VLD_ACTN_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `ACTN_TYP_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_VLD_ACTN_ID`) ,
  INDEX `KRMS_CNTXT_VLD_ACTN_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_VLD_ACTN_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_AGENDA_ATTR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_AGENDA_ATTR_T` (
  `AGENDA_ATTR_ID` VARCHAR(40) NOT NULL ,
  `AGENDA_ID` VARCHAR(40) NOT NULL ,
  `ATTR_VAL` VARCHAR(400) NULL ,
  `ATTR_DEFN_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`AGENDA_ATTR_ID`) ,
  INDEX `KRMS_AGENDA_ATTR_TI1` (`AGENDA_ID` ASC) ,
  INDEX `KRMS_AGENDA_ATTR_T12` (`ATTR_DEFN_ID` ASC) ,
  CONSTRAINT `KRMS_AGENDA_ATTR_FK1`
    FOREIGN KEY (`AGENDA_ID` )
    REFERENCES `KRMS_AGENDA_T` (`AGENDA_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_AGENDA_ATTR_FK2`
    FOREIGN KEY (`ATTR_DEFN_ID` )
    REFERENCES `KRMS_ATTR_DEFN_T` (`ATTR_DEFN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CMPND_PROP_PROPS_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CMPND_PROP_PROPS_T` (
  `CMPND_PROP_ID` VARCHAR(40) NOT NULL ,
  `PROP_ID` VARCHAR(40) NOT NULL ,
  `SEQ_NO` TINYINT NOT NULL ,
  PRIMARY KEY (`CMPND_PROP_ID`, `PROP_ID`) ,
  INDEX `KRMS_CMPND_PROP_PROPS_TI1` (`PROP_ID` ASC) ,
  INDEX `KRMS_CMPND_PROP_PROPS_FK2` (`CMPND_PROP_ID` ASC) ,
  CONSTRAINT `KRMS_CMPND_PROP_PROPS_FK1`
    FOREIGN KEY (`PROP_ID` )
    REFERENCES `KRMS_PROP_T` (`PROP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_CMPND_PROP_PROPS_FK2`
    FOREIGN KEY (`CMPND_PROP_ID` )
    REFERENCES `KRMS_PROP_T` (`PROP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_PROP_PARM_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_PROP_PARM_T` (
  `PROP_PARM_ID` VARCHAR(40) NOT NULL ,
  `PROP_ID` VARCHAR(40) NOT NULL ,
  `PARM_VAL` VARCHAR(255) NULL ,
  `PARM_TYP_CD` VARCHAR(1) NOT NULL ,
  `SEQ_NO` TINYINT NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`PROP_PARM_ID`) ,
  INDEX `KRMS_PROP_PARM_TI1` (`PROP_ID` ASC) ,
  CONSTRAINT `KRMS_PROP_PARM_FK1`
    FOREIGN KEY (`PROP_ID` )
    REFERENCES `KRMS_PROP_T` (`PROP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_SPEC_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_SPEC_T` (
  `TERM_SPEC_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NULL ,
  `NM` VARCHAR(255) NOT NULL ,
  `TYP` VARCHAR(255) NOT NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL ,
  PRIMARY KEY (`TERM_SPEC_ID`) ,
  UNIQUE INDEX `KRMS_ASSET_TC1` (`NM` ASC, `CNTXT_ID` ASC) ,
  INDEX `KRMS_ASSET_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_ASSET_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_RSLVR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_RSLVR_T` (
  `TERM_RSLVR_ID` VARCHAR(40) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `OUTPUT_TERM_SPEC_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`TERM_RSLVR_ID`) ,
  INDEX `KRMS_TERM_RSLVR_TI1` (`CNTXT_ID` ASC) ,
  INDEX `KRMS_TERM_RSLVR_TI2` (`TYP_ID` ASC) ,
  UNIQUE INDEX `KRMS_TERM_RSLVR_TC1` (`NMSPC_CD` ASC, `NM` ASC, `CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_TERM_RSLVR_FK1`
    FOREIGN KEY (`OUTPUT_TERM_SPEC_ID` )
    REFERENCES `KRMS_TERM_SPEC_T` (`TERM_SPEC_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_TERM_RSLVR_FK2`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_TERM_RSLVR_FK3`
    FOREIGN KEY (`TYP_ID` )
    REFERENCES `KRMS_TYP_T` (`TYP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_RSLVR_ATTR_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_RSLVR_ATTR_T` (
  `TERM_RSLVR_ATTR_ID` VARCHAR(40) NOT NULL ,
  `TERM_RSLVR_ID` VARCHAR(40) NOT NULL ,
  `ATTR_DEFN_ID` VARCHAR(40) NOT NULL ,
  `ATTR_VAL` VARCHAR(400) NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`TERM_RSLVR_ATTR_ID`) ,
  INDEX `KRMS_ASSET_RSLVR_ATTR_TI1` (`TERM_RSLVR_ID` ASC) ,
  INDEX `KRMS_ASSET_RSLVR_ATTR_TI2` (`ATTR_DEFN_ID` ASC) ,
  CONSTRAINT `KRMS_ASSET_RSLVR_ATTR_FK1`
    FOREIGN KEY (`TERM_RSLVR_ID` )
    REFERENCES `KRMS_TERM_RSLVR_T` (`TERM_RSLVR_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_ASSET_RSLVR_ATTR_FK2`
    FOREIGN KEY (`ATTR_DEFN_ID` )
    REFERENCES `KRMS_ATTR_DEFN_T` (`ATTR_DEFN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_RSLVR_INPUT_SPEC_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_RSLVR_INPUT_SPEC_T` (
  `TERM_SPEC_ID` VARCHAR(40) NOT NULL ,
  `TERM_RSLVR_ID` VARCHAR(40) NOT NULL ,
  INDEX `KRMS_INPUT_ASSET_TI1` (`TERM_SPEC_ID` ASC) ,
  INDEX `KRMS_INPUT_ASSET_TI2` (`TERM_RSLVR_ID` ASC) ,
  PRIMARY KEY (`TERM_SPEC_ID`, `TERM_RSLVR_ID`) ,
  CONSTRAINT `KRMS_INPUT_ASSET_FK2`
    FOREIGN KEY (`TERM_SPEC_ID` )
    REFERENCES `KRMS_TERM_SPEC_T` (`TERM_SPEC_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_INPUT_ASSET_FK1`
    FOREIGN KEY (`TERM_RSLVR_ID` )
    REFERENCES `KRMS_TERM_RSLVR_T` (`TERM_RSLVR_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_TERM_SPEC_PREREQ_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_TERM_SPEC_PREREQ_T` (
  `CNTXT_TERM_SPEC_PREREQ_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `TERM_SPEC_ID` VARCHAR(40) NOT NULL ,
  PRIMARY KEY (`CNTXT_TERM_SPEC_PREREQ_ID`) ,
  INDEX `KRMS_CNTXT_ASSET_PREREQ_TI1` (`CNTXT_ID` ASC) ,
  INDEX `KRMS_CNTXT_ASSET_PREREQ_TI2` (`TERM_SPEC_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_ASSET_PREREQ_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `KRMS_CNTXT_ASSET_PREREQ_FK2`
    FOREIGN KEY (`TERM_SPEC_ID` )
    REFERENCES `KRMS_TERM_SPEC_T` (`TERM_SPEC_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_T` (
  `TERM_ID` VARCHAR(40) NOT NULL ,
  `TERM_SPEC_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL ,
  PRIMARY KEY (`TERM_ID`) ,
  INDEX `KRMS_TERM_TI1` (`TERM_SPEC_ID` ASC) ,
  CONSTRAINT `KRMS_TERM_T__FK1`
    FOREIGN KEY (`TERM_SPEC_ID` )
    REFERENCES `KRMS_TERM_SPEC_T` (`TERM_SPEC_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_RSLVR_PARM_SPEC_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_RSLVR_PARM_SPEC_T` (
  `TERM_RSLVR_PARM_SPEC_ID` VARCHAR(40) NOT NULL ,
  `TERM_RSLVR_ID` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(45) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL ,
  PRIMARY KEY (`TERM_RSLVR_PARM_SPEC_ID`) ,
  INDEX `KRMS_TERM_RESLV_PARM_FK1` (`TERM_RSLVR_ID` ASC) ,
  CONSTRAINT `KRMS_TERM_RESLV_PARM_FK1`
    FOREIGN KEY (`TERM_RSLVR_ID` )
    REFERENCES `KRMS_TERM_RSLVR_T` (`TERM_RSLVR_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_TERM_PARM_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_TERM_PARM_T` (
  `TERM_PARM_ID` VARCHAR(40) NOT NULL ,
  `TERM_ID` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(255) NOT NULL ,
  `VAL` VARCHAR(255) NULL ,
  `VER_NBR` DECIMAL NOT NULL ,
  PRIMARY KEY (`TERM_PARM_ID`) ,
  INDEX `KRMS_TERM_PARM_TI1` (`TERM_ID` ASC) ,
  CONSTRAINT `KRMS_TERM_PARM_FK1`
    FOREIGN KEY (`TERM_ID` )
    REFERENCES `KRMS_TERM_T` (`TERM_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_FUNC_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_FUNC_T` (
  `FUNC_ID` VARCHAR(40) NOT NULL ,
  `NMSPC_CD` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `DESC_TXT` VARCHAR(255) NULL ,
  `RTRN_TYP` VARCHAR(255) NOT NULL ,
  `TYP_ID` VARCHAR(40) NOT NULL ,
  `ACTV` VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`FUNC_ID`) ,
  INDEX `KRMS_FUNC_TI1` (`TYP_ID` ASC) ,
  CONSTRAINT `KRMS_FUNC_FK1`
    FOREIGN KEY (`TYP_ID` )
    REFERENCES `KRMS_TYP_T` (`TYP_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_FUNC_PARM_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_FUNC_PARM_T` (
  `FUNC_PARM_ID` VARCHAR(40) NOT NULL ,
  `NM` VARCHAR(100) NOT NULL ,
  `DESC_TXT` VARCHAR(255) NULL ,
  `TYP` VARCHAR(255) NOT NULL ,
  `FUNC_ID` VARCHAR(40) NOT NULL ,
  `SEQ_NO` TINYINT NOT NULL ,
  PRIMARY KEY (`FUNC_PARM_ID`) ,
  INDEX `KRMS_FUNC_PARM_TI1` (`FUNC_ID` ASC) ,
  CONSTRAINT `KRMS_FUNC_PARM_FK1`
    FOREIGN KEY (`FUNC_ID` )
    REFERENCES `KRMS_FUNC_T` (`FUNC_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_VLD_FUNC_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_VLD_FUNC_T` (
  `CNTXT_VLD_FUNC_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `FUNC_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_VLD_FUNC_ID`) ,
  INDEX `KRMS_CNTXT_VLD_FUNC_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_VLD_FUNC_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_VLD_RULE_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_VLD_RULE_T` (
  `CNTXT_VLD_RULE_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `RULE_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_VLD_RULE_ID`) ,
  INDEX `KRMS_CNTXT_VLD_RULE_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_VLD_RULE_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRMS_CNTXT_VLD_EVENT_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_VLD_EVENT_T` (
  `CNTXT_VLD_EVENT_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `EVENT_NM` VARCHAR(255) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_VLD_EVENT_ID`) ,
  INDEX `KRMS_CNTXT_VLD_EVENT_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_VLD_EVENT_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;



SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


--
--
-- Sequence tables
--
--


CREATE TABLE KRMS_TYP_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TYP_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_PROP_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_PROP_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_RULE_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_RULE_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_AGENDA_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_AGENDA_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_ATTR_DEFN_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_ATTR_DEFN_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TYP_ATTR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TYP_ATTR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_ACTN_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_ACTN_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_ACTN_ATTR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_ACTN_ATTR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_AGENDA_ITM_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_AGENDA_ITM_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_RULE_ATTR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_RULE_ATTR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_ATTR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_ATTR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_VLD_ACTN_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_VLD_ACTN_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_AGENDA_ATTR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_AGENDA_ATTR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CMPND_PROP_PROPS_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CMPND_PROP_PROPS_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_PROP_PARM_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_PROP_PARM_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_SPEC_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_SPEC_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_RSLVR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_RSLVR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_RSLVR_ATTR_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_RSLVR_ATTR_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_RSLVR_INPUT_SPEC_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_RSLVR_INPUT_SPEC_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_RSLVR_PARM_SPEC_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_RSLVR_PARM_SPEC_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_TERM_PARM_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_TERM_PARM_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_FUNC_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_FUNC_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_FUNC_PARM_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_FUNC_PARM_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_VLD_FUNC_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_VLD_FUNC_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_VLD_RULE_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_VLD_RULE_S AUTO_INCREMENT = 1000;


CREATE TABLE KRMS_CNTXT_VLD_EVENT_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_VLD_EVENT_S AUTO_INCREMENT = 1000;



-- 
-- mysql-2011-05-13.sql
-- 


DROP TABLE KRSB_SVC_DEF_T
;
DROP TABLE KRSB_FLT_SVC_DEF_T
;
DROP TABLE KRSB_SVC_DEF_S
;
DROP TABLE KRSB_FLT_SVC_DEF_S
;
CREATE TABLE KRSB_SVC_DSCRPTR_T (
  SVC_DSCRPTR_ID VARCHAR(40) NOT NULL,
  DSCRPTR LONGTEXT NOT NULL,
  PRIMARY KEY (SVC_DSCRPTR_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin
;
CREATE TABLE KRSB_SVC_DSCRPTR_S (
  ID BIGINT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (ID)
) ENGINE=MyISAM AUTO_INCREMENT=1000 DEFAULT CHARSET=utf8 COLLATE=utf8_bin
;
CREATE TABLE KRSB_SVC_DEF_T (
  SVC_DEF_ID VARCHAR(40) NOT NULL,
  SVC_NM VARCHAR(255) NOT NULL,
  SVC_URL VARCHAR(500) NOT NULL,
  INSTN_ID VARCHAR(255) NOT NULL,
  APPL_NMSPC VARCHAR(255) NOT NULL,
  SRVR_IP VARCHAR(40) NOT NULL,
  TYP_CD VARCHAR(40) NOT NULL,
  SVC_VER VARCHAR(40) NOT NULL,
  STAT_CD VARCHAR(1) NOT NULL,
  SVC_DSCRPTR_ID VARCHAR(40) NOT NULL,
  CHKSM VARCHAR(30) NOT NULL,
  VER_NBR DECIMAL(8,0) DEFAULT '0',
  PRIMARY KEY (SVC_DEF_ID),
  INDEX KRSB_SVC_DEF_TI1 (INSTN_ID),
  INDEX KRSB_SVC_DEF_TI2 (SVC_NM, STAT_CD),
  INDEX KRSB_SVC_DEF_TI3 (STAT_CD),
  FOREIGN KEY KRSB_SVC_DEF_FK1 (SVC_DSCRPTR_ID) REFERENCES KRSB_SVC_DSCRPTR_T(SVC_DSCRPTR_ID) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin
;
CREATE TABLE KRSB_SVC_DEF_S (
  ID BIGINT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (ID)
) ENGINE=MyISAM AUTO_INCREMENT=1000 DEFAULT CHARSET=utf8 COLLATE=utf8_bin
;


-- 
-- mysql-2011-06-06.sql
-- 


ALTER TABLE KREW_DOC_TYP_T CHANGE SVC_NMSPC APPL_ID VARCHAR(255)
;
ALTER TABLE KREW_RULE_ATTR_T CHANGE SVC_NMSPC APPL_ID VARCHAR(255)
;
ALTER TABLE KRSB_SVC_DEF_T CHANGE APPL_NMSPC APPL_ID VARCHAR(255)
;
ALTER TABLE KRSB_MSG_QUE_T CHANGE SVC_NMSPC APPL_ID VARCHAR(255)
;
ALTER TABLE KRNS_NMSPC_T CHANGE APPL_NMSPC_CD APPL_ID VARCHAR(255)
;
ALTER TABLE KRNS_PARM_T CHANGE APPL_NMSPC_CD APPL_ID VARCHAR(255)
;

RENAME TABLE KRNS_NMSPC_T TO KRCR_NMSPC_T
;
RENAME TABLE KRNS_PARM_TYP_T TO KRCR_PARM_TYP_T
;
RENAME TABLE KRNS_PARM_DTL_TYP_T TO KRCR_PARM_DTL_TYP_T
;
RENAME TABLE KRNS_PARM_T TO KRCR_PARM_T
;

RENAME TABLE KRNS_CAMPUS_T TO KRLC_CMP_T
;
RENAME TABLE KRNS_CMP_TYP_T TO KRLC_CMP_TYP_T
;
RENAME TABLE KR_COUNTRY_T TO KRLC_CNTRY_T
;
RENAME TABLE KR_STATE_T TO KRLC_ST_T
;
RENAME TABLE KR_POSTAL_CODE_T TO KRLC_PSTL_CD_T
;
RENAME TABLE KR_COUNTY_T TO KRLC_CNTY_T
;



-- 
-- mysql-2011-06-08.sql
-- 


-- make krms_rule_t.prop_id nullable
ALTER TABLE KRMS_RULE_T CHANGE COLUMN PROP_ID PROP_ID VARCHAR(40) DEFAULT NULL AFTER TYP_ID;

-- add krms_actn_t.nmspc_cd
ALTER TABLE KRMS_ACTN_T ADD COLUMN NMSPC_CD VARCHAR(40) NOT NULL AFTER NM;

-- make krms_agenda_t default to 'Y'
ALTER TABLE KRMS_AGENDA_T CHANGE COLUMN ACTV ACTV VARCHAR(1) DEFAULT 'Y' AFTER TYP_ID;

-- make krms_prop_t.typ_id nullable 
ALTER TABLE KRMS_PROP_T CHANGE COLUMN TYP_ID TYP_ID VARCHAR(40) DEFAULT NULL AFTER DESC_TXT;

-- change krms_rule_t.descr_txt to desc_t for consistency
ALTER TABLE KRMS_RULE_T CHANGE COLUMN DESCR_TXT DESC_TXT VARCHAR(4000) DEFAULT NULL AFTER NM;




-- 
-- mysql-2011-06-13-m6.sql
-- 


UPDATE KREW_DOC_TYP_T SET POST_PRCSR = 'org.kuali.rice.krad.workflow.postprocessor.KualiPostProcessor' WHERE POST_PRCSR = 'org.kuali.rice.kns.workflow.postprocessor.KualiPostProcessor';

UPDATE KREW_RULE_ATTR_T SET CLS_NM = 'org.kuali.rice.krad.workflow.attribute.KualiXmlSearchableAttributeImpl' WHERE CLS_NM = 'org.kuali.rice.kns.workflow.attribute.KualiXmlSearchableAttributeImpl';

UPDATE KREW_RULE_ATTR_T SET CLS_NM = 'org.kuali.rice.kns.workflow.attribute.KualiXMLBooleanTranslatorSearchableAttributeImpl' WHERE CLS_NM = 'org.kuali.rice.kns.workflow.attribute.KualiXMLBooleanTranslatorSearchableAttributeImpl';

UPDATE KREW_RULE_ATTR_T SET CLS_NM = 'org.kuali.rice.kns.workflow.attribute.KualiXmlRuleAttributeImpl' WHERE CLS_NM = 'org.kuali.rice.kns.workflow.attribute.KualiXmlRuleAttributeImpl';


-- 
-- mysql-2011-06-17-m6.sql
-- 


ALTER TABLE KREW_DOC_TYP_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_T CHANGE PARNT_ID PARNT_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_T CHANGE PREV_DOC_TYP_VER_NBR PREV_DOC_TYP_VER_NBR VARCHAR(40);
ALTER TABLE KREW_DOC_HDR_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_PLCY_RELN_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_APP_DOC_STAT_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_ATTR_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_PROC_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);




-- 
-- mysql-2011-06-21.sql
-- 


ALTER TABLE KRIM_PERM_TMPL_T CHANGE COLUMN NMSPC_CD NMSPC_CD VARCHAR(40) NOT NULL;
ALTER TABLE KRIM_PERM_TMPL_T CHANGE COLUMN NM NM VARCHAR(100) NOT NULL;
ALTER TABLE KRIM_PERM_TMPL_T ADD CONSTRAINT KRIM_PERM_TMPL_TC1 UNIQUE (NM, NMSPC_CD);

ALTER TABLE KRIM_RSP_TMPL_T CHANGE COLUMN NMSPC_CD NMSPC_CD VARCHAR(40) NOT NULL;
ALTER TABLE KRIM_RSP_TMPL_T CHANGE COLUMN NM NM VARCHAR(100) NOT NULL;
ALTER TABLE KRIM_RSP_TMPL_T ADD CONSTRAINT KRIM_RSP_TMPL_TC1 UNIQUE (NM, NMSPC_CD);


-- 
-- mysql-2011-06-23.sql
-- 


-- Sequence table
CREATE TABLE KRMS_CTGRY_S
(
    ID BIGINT NOT NULL AUTO_INCREMENT
    , PRIMARY KEY (ID)
) ENGINE MyISAM;
ALTER TABLE KRMS_CTGRY_S AUTO_INCREMENT = 1;

CREATE TABLE KRMS_CTGRY_T
(
    CTGRY_ID VARCHAR(40) NOT NULL
      , NM VARCHAR(255) NOT NULL
      , NMSPC_CD VARCHAR(40) NOT NULL
      , VER_NBR DECIMAL(8) DEFAULT 0
    , PRIMARY KEY (CTGRY_ID)
    , UNIQUE INDEX KRMS_CTGRY_TC0 (NM, NMSPC_CD)
)ENGINE = InnoDB;

CREATE TABLE KRMS_TERM_SPEC_CTGRY_T
(
  TERM_SPEC_ID VARCHAR(40) NOT NULL
      , CTGRY_ID VARCHAR(40) NOT NULL
  , PRIMARY KEY (TERM_SPEC_ID, CTGRY_ID)
  , CONSTRAINT KRMS_TERM_SPEC_CTGRY_FK1 FOREIGN KEY (TERM_SPEC_ID) REFERENCES KRMS_TERM_SPEC_T (TERM_SPEC_ID)
  , CONSTRAINT KRMS_TERM_SPEC_CTGRY_FK2 FOREIGN KEY (CTGRY_ID) REFERENCES KRMS_CTGRY_T (CTGRY_ID)
);

CREATE TABLE KRMS_FUNC_CTGRY_T
(
  FUNC_ID VARCHAR(40) NOT NULL
  , CTGRY_ID VARCHAR(40) NOT NULL
  , PRIMARY KEY (FUNC_ID, CTGRY_ID)
  , CONSTRAINT KRMS_FUNC_CTGRY_FK1 FOREIGN KEY (FUNC_ID) REFERENCES KRMS_FUNC_T (FUNC_ID)
  , CONSTRAINT KRMS_FUNC_CTGRY_FK2 FOREIGN KEY (CTGRY_ID) REFERENCES KRMS_CTGRY_T (CTGRY_ID)
);


-- 
-- mysql-2011-06-29.sql
-- 


update KRIM_PERM_T t SET NM='Use Document Operation Screen' WHERE PERM_ID = '140';
update KRIM_PERM_T t SET NM='Use Java Security Management Screen' WHERE PERM_ID = '141';
update KRIM_PERM_T t SET NM='Use Message Queue Screen' WHERE PERM_ID = '142';
update KRIM_PERM_T t SET NM='Use Service Registry Screen' WHERE PERM_ID = '143';
update KRIM_PERM_T t SET NM='Use Thread Pool Screen' WHERE PERM_ID = '144';
update KRIM_PERM_T t SET NM='Use Quartz Queue Screen' WHERE PERM_ID = '145';
update KRIM_PERM_T t SET NM='Ad Hoc Review RICE Document' WHERE PERM_ID = '146';
update KRIM_PERM_T t SET NM='Administer Routing RICE Document' WHERE PERM_ID = '147';
update KRIM_PERM_T t SET NM='Blanket Approve RICE Document' WHERE PERM_ID = '148';
update KRIM_PERM_T t SET NM='Initiate RICE Document' WHERE PERM_ID = '149';
update KRIM_PERM_T t SET NM='Assign Role' WHERE PERM_ID = '150';
update KRIM_PERM_T t SET NM='Grant Permission' WHERE PERM_ID = '151';
update KRIM_PERM_T t SET NM='Grant Responsibility' WHERE PERM_ID = '152';
update KRIM_PERM_T t SET NM='Populate Group' WHERE PERM_ID = '155';
update KRIM_PERM_T t SET NM='Copy RICE Document' WHERE PERM_ID = '156';
update KRIM_PERM_T t SET NM='Inquire Into RICE Records' WHERE PERM_ID = '161';
update KRIM_PERM_T t SET NM='Look Up RICE Records' WHERE PERM_ID = '162';
update KRIM_PERM_T t SET NM='Maintain System Parameter' WHERE PERM_ID = '163';
update KRIM_PERM_T t SET NM='Modify Batch Job' WHERE PERM_ID = '164';
update KRIM_PERM_T t SET NM='Open RICE Document' WHERE PERM_ID = '165';
update KRIM_PERM_T t SET NM='Use all RICE Screen' WHERE PERM_ID = '166';
update KRIM_PERM_T t SET NM='Cancel Document' WHERE PERM_ID = '167';
update KRIM_PERM_T t SET NM='Route Document' WHERE PERM_ID = '168';
update KRIM_PERM_T t SET NM='Take Requested Apprive Action' WHERE PERM_ID = '170';
update KRIM_PERM_T t SET NM='Take Requested FYI Action' WHERE PERM_ID = '172';
update KRIM_PERM_T t SET NM='Take Requested Acknowledge Action' WHERE PERM_ID = '173';
update KRIM_PERM_T t SET NM='Log In Kuali Portal' WHERE PERM_ID = '174';
update KRIM_PERM_T t SET NM='Edit Kuali ENROUTE Document Node Name PreRoute' WHERE PERM_ID = '180';
update KRIM_PERM_T t SET NM='Edit Kuali ENROUTE Document Route Status Code R' WHERE PERM_ID = '181';
update KRIM_PERM_T t SET NM='Full Unmask Tax Identification Number Payee ACH Document'  WHERE PERM_ID = '183';
update KRIM_PERM_T t SET NM='Add Note / Attachment Kuali Document' WHERE PERM_ID = '259';
update KRIM_PERM_T t SET NM='View Note / Attachment Kuali Document' WHERE PERM_ID = '261';
update KRIM_PERM_T t SET NM='Delete Note / Attachment Kuali Document' WHERE PERM_ID = '264';
update KRIM_PERM_T t SET NM='Use Screen XML Ingester Screen' WHERE PERM_ID = '265';
update KRIM_PERM_T t SET NM='Administer Pessimistic Locking' WHERE PERM_ID = '289';
update KRIM_PERM_T t SET NM='Save RICE Document' WHERE PERM_ID = '290';
update KRIM_PERM_T t SET NM='View Other Action List' WHERE PERM_ID = '298';
update KRIM_PERM_T t SET NM='Unrestricted Document Search' WHERE PERM_ID = '299';
update KRIM_PERM_T t SET NM='Full Unmask Tax Identification Number Person Document' WHERE PERM_ID = '306';
update KRIM_PERM_T t SET NM='Modify Entity' WHERE PERM_ID = '307';
update KRIM_PERM_T t SET NM='Send FYI Request Kuali Document' WHERE PERM_ID = '332';
update KRIM_PERM_T t SET NM='Send Acknowledge Request Kuali Document' WHERE PERM_ID = '333';
update KRIM_PERM_T t SET NM='Send Approve Request Kuali Document' WHERE PERM_ID = '334';
update KRIM_PERM_T t SET NM='Override Entity Privacy Preferences' WHERE PERM_ID = '378';
update KRIM_PERM_T t SET NM='Look Up Rule Template' WHERE PERM_ID = '701';
update KRIM_PERM_T t SET NM='Look Up Stylesheet' WHERE PERM_ID = '702';
update KRIM_PERM_T t SET NM='Look Up eDocLite' WHERE PERM_ID = '703';
update KRIM_PERM_T t SET NM='Look Up Rule Attribute' WHERE PERM_ID = '707';
update KRIM_PERM_T t SET NM='Look Up Parameter Component' WHERE PERM_ID = '719';
update KRIM_PERM_T t SET NM='Look Up Namespace' WHERE PERM_ID = '720';
update KRIM_PERM_T t SET NM='Look Up Parameter Type' WHERE PERM_ID = '721';
update KRIM_PERM_T t SET NM='Inquire Into Rule Template' WHERE PERM_ID = '801';
update KRIM_PERM_T t SET NM='Inquire Into Stylesheet' WHERE PERM_ID = '802';
update KRIM_PERM_T t SET NM='Inquire Into eDocLite' WHERE PERM_ID = '803';
update KRIM_PERM_T t SET NM='Inquire Into Rule Attribute' WHERE PERM_ID = '807';
update KRIM_PERM_T t SET NM='Inquire Into Pessimistic' WHERE PERM_ID = '814';
update KRIM_PERM_T t SET NM='Inquire Into Parameter Component' WHERE PERM_ID = '819';
update KRIM_PERM_T t SET NM='Inquire Into Namespace' WHERE PERM_ID = '820';
update KRIM_PERM_T t SET NM='Inquire Into Parameter Type' WHERE PERM_ID = '821';
update KRIM_PERM_T t SET NM='Populate Group KUALI Namespace' WHERE PERM_ID = '833';
update KRIM_PERM_T t SET NM='Assign Role KUALI Namespace' WHERE PERM_ID = '834';
update KRIM_PERM_T t SET NM='Grant Permission KUALI Namespace' WHERE PERM_ID = '835';
update KRIM_PERM_T t SET NM='Grant Responsibility KUALI Namespace' WHERE PERM_ID = '836';
update KRIM_PERM_T t SET NM='Use Configuration Viewer Screen' WHERE PERM_ID = '840';
update KRIM_PERM_T t SET NM='Add Message to Route Log'  WHERE PERM_ID = '841';

ALTER TABLE KRIM_PERM_T CHANGE COLUMN NMSPC_CD NMSPC_CD VARCHAR(40) NOT NULL;
ALTER TABLE KRIM_PERM_T CHANGE COLUMN NM NM VARCHAR(100) NOT NULL;
ALTER TABLE KRIM_PERM_T ADD CONSTRAINT KRIM_PERM_T_TC1 UNIQUE (NM, NMSPC_CD);

ALTER TABLE KRIM_RSP_T CHANGE COLUMN NMSPC_CD NMSPC_CD VARCHAR(40) NOT NULL;
ALTER TABLE KRIM_RSP_T CHANGE COLUMN NM NM VARCHAR(100) NOT NULL;
ALTER TABLE KRIM_RSP_T ADD CONSTRAINT KRIM_RSP_T_TC1 UNIQUE (NM, NMSPC_CD);


-- 
-- mysql-2011-07-07-m6.sql
-- 


ALTER TABLE KREW_DOC_NTE_T CHANGE DOC_NTE_ID DOC_NTE_ID VARCHAR(40);

ALTER TABLE KREW_ATT_T CHANGE ATTACHMENT_ID ATTACHMENT_ID VARCHAR(40);
ALTER TABLE KREW_ATT_T CHANGE NTE_ID NTE_ID VARCHAR(40);

ALTER TABLE KREW_ACTN_ITM_T CHANGE ACTN_ITM_ID ACTN_ITM_ID VARCHAR(40);
ALTER TABLE KREW_ACTN_ITM_T CHANGE ACTN_RQST_ID ACTN_RQST_ID VARCHAR(40);
ALTER TABLE KREW_ACTN_ITM_T CHANGE RSP_ID RSP_ID VARCHAR(40);

ALTER TABLE KREW_ACTN_TKN_T CHANGE ACTN_TKN_ID ACTN_TKN_ID VARCHAR(40);

ALTER TABLE KREW_ACTN_RQST_T CHANGE ACTN_RQST_ID ACTN_RQST_ID VARCHAR(40); 
ALTER TABLE KREW_ACTN_RQST_T CHANGE PARNT_ID PARNT_ID VARCHAR(40);
ALTER TABLE KREW_ACTN_RQST_T CHANGE RSP_ID RSP_ID VARCHAR(40);
ALTER TABLE KREW_ACTN_RQST_T CHANGE ACTN_TKN_ID ACTN_TKN_ID VARCHAR(40);
ALTER TABLE KREW_ACTN_RQST_T CHANGE RULE_ID RULE_ID VARCHAR(40);
ALTER TABLE KREW_ACTN_RQST_T CHANGE RTE_NODE_INSTN_ID RTE_NODE_INSTN_ID VARCHAR(40);

ALTER TABLE KREW_RULE_TMPL_T CHANGE RULE_TMPL_ID RULE_TMPL_ID VARCHAR(40);
ALTER TABLE KREW_RULE_TMPL_T CHANGE DLGN_RULE_TMPL_ID DLGN_RULE_TMPL_ID VARCHAR(40);

ALTER TABLE KREW_RULE_TMPL_ATTR_T CHANGE RULE_TMPL_ATTR_ID RULE_TMPL_ATTR_ID VARCHAR(40);
ALTER TABLE KREW_RULE_TMPL_ATTR_T CHANGE RULE_TMPL_ID RULE_TMPL_ID VARCHAR(40);
ALTER TABLE KREW_RULE_TMPL_ATTR_T CHANGE RULE_ATTR_ID RULE_ATTR_ID VARCHAR(40);

ALTER TABLE KREW_RULE_T CHANGE RULE_ID RULE_ID VARCHAR(40);
ALTER TABLE KREW_RULE_T CHANGE RULE_TMPL_ID RULE_TMPL_ID VARCHAR(40);

-- Have to deal w/ index & constraint changes here
ALTER TABLE KREW_RULE_T DROP FOREIGN KEY KREW_RULE_TR1;
ALTER TABLE KREW_RULE_T DROP KEY KREW_RULE_TR1;

ALTER TABLE KREW_RULE_T CHANGE RULE_EXPR_ID RULE_EXPR_ID VARCHAR(40);
-- add the key back, we'll re-add the foreign key after the target id column is converted
ALTER TABLE KREW_RULE_T ADD KEY KREW_RULE_TI1 (RULE_EXPR_ID);

ALTER TABLE KREW_RULE_T CHANGE PREV_RULE_VER_NBR PREV_RULE_VER_NBR VARCHAR(40);

ALTER TABLE KREW_DLGN_RSP_T CHANGE DLGN_RULE_ID DLGN_RULE_ID VARCHAR(40);
ALTER TABLE KREW_DLGN_RSP_T CHANGE RSP_ID RSP_ID VARCHAR(40);
ALTER TABLE KREW_DLGN_RSP_T CHANGE DLGN_RULE_BASE_VAL_ID DLGN_RULE_BASE_VAL_ID VARCHAR(40);

ALTER TABLE KREW_RULE_RSP_T CHANGE RULE_RSP_ID RULE_RSP_ID VARCHAR(40);
ALTER TABLE KREW_RULE_RSP_T CHANGE RSP_ID RSP_ID VARCHAR(40);
ALTER TABLE KREW_RULE_RSP_T CHANGE RULE_ID RULE_ID VARCHAR(40);

ALTER TABLE KREW_RULE_EXT_T CHANGE RULE_EXT_ID RULE_EXT_ID VARCHAR(40);
ALTER TABLE KREW_RULE_EXT_T CHANGE RULE_TMPL_ATTR_ID RULE_TMPL_ATTR_ID VARCHAR(40);
ALTER TABLE KREW_RULE_EXT_T CHANGE RULE_ID RULE_ID VARCHAR(40);

-- Have to deal w/ index & constraint changes before KREW_RTE_NODE_T.RTE_NODE_ID is converted
ALTER TABLE KREW_RTE_NODE_CFG_PARM_T DROP FOREIGN KEY EN_RTE_NODE_CFG_PARM_TR1;
ALTER TABLE KREW_RTE_NODE_CFG_PARM_T DROP KEY KREW_RTE_NODE_CFG_PARM_TI1;

ALTER TABLE KREW_RTE_NODE_T CHANGE RTE_NODE_ID RTE_NODE_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_T CHANGE BRCH_PROTO_ID BRCH_PROTO_ID VARCHAR(40);

ALTER TABLE KREW_RTE_NODE_INSTN_T CHANGE RTE_NODE_INSTN_ID RTE_NODE_INSTN_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_INSTN_T CHANGE RTE_NODE_ID RTE_NODE_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_INSTN_T CHANGE BRCH_ID BRCH_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_INSTN_T CHANGE PROC_RTE_NODE_INSTN_ID PROC_RTE_NODE_INSTN_ID VARCHAR(40);

ALTER TABLE KREW_RTE_NODE_INSTN_LNK_T CHANGE TO_RTE_NODE_INSTN_ID TO_RTE_NODE_INSTN_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_INSTN_LNK_T CHANGE FROM_RTE_NODE_INSTN_ID FROM_RTE_NODE_INSTN_ID VARCHAR(40);

ALTER TABLE KREW_RTE_BRCH_T CHANGE RTE_BRCH_ID RTE_BRCH_ID VARCHAR(40);
ALTER TABLE KREW_RTE_BRCH_T CHANGE PARNT_ID PARNT_ID VARCHAR(40);
ALTER TABLE KREW_RTE_BRCH_T CHANGE INIT_RTE_NODE_INSTN_ID INIT_RTE_NODE_INSTN_ID VARCHAR(40);
ALTER TABLE KREW_RTE_BRCH_T CHANGE JOIN_RTE_NODE_INSTN_ID JOIN_RTE_NODE_INSTN_ID VARCHAR(40);
ALTER TABLE KREW_RTE_BRCH_T CHANGE SPLT_RTE_NODE_INSTN_ID SPLT_RTE_NODE_INSTN_ID VARCHAR(40);

ALTER TABLE KREW_RTE_BRCH_ST_T CHANGE RTE_BRCH_ST_ID RTE_BRCH_ST_ID VARCHAR(40);
ALTER TABLE KREW_RTE_BRCH_ST_T CHANGE RTE_BRCH_ID RTE_BRCH_ID VARCHAR(40);

ALTER TABLE KREW_RTE_NODE_INSTN_ST_T CHANGE RTE_NODE_INSTN_ST_ID RTE_NODE_INSTN_ST_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_INSTN_ST_T CHANGE RTE_NODE_INSTN_ID RTE_NODE_INSTN_ID VARCHAR(40);

ALTER TABLE KREW_DOC_TYP_ATTR_T CHANGE DOC_TYP_ATTRIB_ID DOC_TYP_ATTRIB_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_ATTR_T CHANGE DOC_TYP_ID DOC_TYP_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_ATTR_T CHANGE RULE_ATTR_ID RULE_ATTR_ID VARCHAR(40);

ALTER TABLE KREW_RULE_ATTR_T CHANGE RULE_ATTR_ID RULE_ATTR_ID VARCHAR(40);

ALTER TABLE KREW_RULE_TMPL_OPTN_T CHANGE RULE_TMPL_OPTN_ID RULE_TMPL_OPTN_ID VARCHAR(40);
ALTER TABLE KREW_RULE_TMPL_OPTN_T CHANGE RULE_TMPL_ID RULE_TMPL_ID VARCHAR(40);

ALTER TABLE KREW_OUT_BOX_ITM_T CHANGE ACTN_ITM_ID ACTN_ITM_ID VARCHAR(40);
ALTER TABLE KREW_OUT_BOX_ITM_T CHANGE ACTN_RQST_ID ACTN_RQST_ID VARCHAR(40);
ALTER TABLE KREW_OUT_BOX_ITM_T CHANGE RSP_ID RSP_ID VARCHAR(40);

ALTER TABLE KREW_RTE_NODE_CFG_PARM_T CHANGE RTE_NODE_ID RTE_NODE_ID VARCHAR(40);
-- add the key back, re-add the foreign key
ALTER TABLE KREW_RTE_NODE_CFG_PARM_T ADD KEY KREW_RTE_NODE_CFG_PARM_TI1 (RTE_NODE_ID);
ALTER TABLE KREW_RTE_NODE_CFG_PARM_T ADD CONSTRAINT KREW_RTE_NODE_CFG_PARM_TR1 FOREIGN KEY KREW_RTE_NODE_CFG_PARM_TI1 (RTE_NODE_ID) REFERENCES KREW_RTE_NODE_T (RTE_NODE_ID);

ALTER TABLE KREW_RTE_NODE_CFG_PARM_T CHANGE RTE_NODE_CFG_PARM_ID RTE_NODE_CFG_PARM_ID VARCHAR(40);


ALTER TABLE KREW_DOC_TYP_PROC_T CHANGE DOC_TYP_PROC_ID DOC_TYP_PROC_ID VARCHAR(40);
ALTER TABLE KREW_DOC_TYP_PROC_T CHANGE INIT_RTE_NODE_ID INIT_RTE_NODE_ID VARCHAR(40);

ALTER TABLE KREW_DOC_LNK_T CHANGE DOC_LNK_ID DOC_LNK_ID VARCHAR(40);

ALTER TABLE KREW_RTE_BRCH_PROTO_T CHANGE RTE_BRCH_PROTO_ID RTE_BRCH_PROTO_ID VARCHAR(40);

ALTER TABLE KREW_HLP_T CHANGE HLP_ID HLP_ID VARCHAR(40);

ALTER TABLE KREW_RULE_EXT_VAL_T CHANGE RULE_EXT_VAL_ID RULE_EXT_VAL_ID VARCHAR(40);
ALTER TABLE KREW_RULE_EXT_VAL_T CHANGE RULE_EXT_ID RULE_EXT_ID VARCHAR(40);

ALTER TABLE KREW_RULE_EXPR_T CHANGE RULE_EXPR_ID RULE_EXPR_ID VARCHAR(40);
ALTER TABLE KREW_RULE_T ADD CONSTRAINT KREW_RULE_FK1 FOREIGN KEY KREW_RULE_TI1 (RULE_EXPR_ID) REFERENCES KREW_RULE_EXPR_T (RULE_EXPR_ID);



ALTER TABLE KREW_APP_DOC_STAT_TRAN_T CHANGE APP_DOC_STAT_TRAN_ID APP_DOC_STAT_TRAN_ID VARCHAR(40);

ALTER TABLE KREW_DOC_HDR_EXT_DT_T CHANGE DOC_HDR_EXT_DT_ID DOC_HDR_EXT_DT_ID VARCHAR(40);

ALTER TABLE KREW_DOC_HDR_EXT_LONG_T CHANGE DOC_HDR_EXT_LONG_ID DOC_HDR_EXT_LONG_ID VARCHAR(40);

ALTER TABLE KREW_DOC_HDR_EXT_FLT_T CHANGE DOC_HDR_EXT_FLT_ID DOC_HDR_EXT_FLT_ID VARCHAR(40);

ALTER TABLE KREW_DOC_HDR_EXT_T CHANGE DOC_HDR_EXT_ID DOC_HDR_EXT_ID VARCHAR(40);




-- 
-- mysql-2011-07-11-m6.sql
-- 


ALTER TABLE KREW_RTE_NODE_LNK_T CHANGE FROM_RTE_NODE_ID FROM_RTE_NODE_ID VARCHAR(40);
ALTER TABLE KREW_RTE_NODE_LNK_T CHANGE TO_RTE_NODE_ID TO_RTE_NODE_ID VARCHAR(40);



-- 
-- mysql-2011-07-13.sql
-- 


-- KRCR_PARM_T
alter table KRCR_PARM_T CHANGE PARM_DTL_TYP_CD CMPNT_CD varchar(100);
alter table KRCR_PARM_T CHANGE TXT VAL varchar(4000);
alter table KRCR_PARM_T CHANGE CONS_CD EVAL_OPRTR_CD varchar(1);

-- KRCR_PARM_DTL_TYP_T to KRCR_CMPNT_T
RENAME TABLE KRCR_PARM_DTL_TYP_T TO KRCR_CMPNT_T;
ALTER TABLE KRCR_CMPNT_T CHANGE PARM_DTL_TYP_CD CMPNT_CD VARCHAR(100);

-- KRLC_CMP_TYP_T
ALTER TABLE KRLC_CMP_TYP_T DROP COLUMN DOBJ_MAINT_CD_ACTV_IND;


-- 
-- mysql-2011-07-22.sql
-- 


-- MySQL sql for KULRICE-5419:
ALTER TABLE KRMS_CNTXT_T ADD COLUMN DESC_TXT VARCHAR(255) DEFAULT NULL;
ALTER TABLE KRMS_TERM_SPEC_T ADD COLUMN DESC_TXT VARCHAR(255) DEFAULT NULL;
ALTER TABLE KRMS_TERM_T ADD COLUMN DESC_TXT VARCHAR(255) DEFAULT NULL;
ALTER TABLE KRMS_ATTR_DEFN_T ADD COLUMN DESC_TXT VARCHAR(255) DEFAULT NULL;



-- 
-- mysql-2011-07-24-m7.sql
-- 


DROP TABLE KREW_HLP_S;
DROP TABLE KREW_HLP_T;


-- 
-- mysql-2011-07-25-m7.sql
-- 


DROP TABLE KREW_RIA_DOC_T;
DROP TABLE KREW_RIA_DOCTYPE_MAP_ID_S;
DROP TABLE KREW_RIA_DOCTYPE_MAP_T;

DROP TABLE KREW_RMV_RPLC_DOC_T;
DROP TABLE KREW_RMV_RPLC_GRP_T;
DROP TABLE KREW_RMV_RPLC_RULE_T;


-- 
-- mysql-2011-07-28-m7.sql
-- 


ALTER TABLE KREW_INIT_RTE_NODE_INSTN_T CHANGE RTE_NODE_INSTN_ID RTE_NODE_INSTN_ID VARCHAR(40);


-- 
-- mysql-2011-07-29-m7.sql
-- 


UPDATE KRIM_PERM_T T SET NM='Take Requested Approve Action' WHERE PERM_ID = '170';


-- 
-- mysql-2011-07-29.sql
-- 


--
-- make combo of nm & nmspc_cd unique in all applicable KRMS tables
-- and drop nmspc_cd where it doesn't make sense
--

--
-- break direct fk to krms_cntxt_t from krms_term_rslvr_t & krms_term_spec_t
--

-- remove cntxt_id from krms_term_rslvr_t, fix unique constraint
ALTER TABLE KRMS_TERM_RSLVR_T DROP INDEX KRMS_TERM_RSLVR_TC1;
ALTER TABLE KRMS_TERM_RSLVR_T ADD CONSTRAINT KRMS_TERM_RSLVR_TC1 UNIQUE (NM, NMSPC_CD);
ALTER TABLE KRMS_TERM_RSLVR_T DROP FOREIGN KEY KRMS_TERM_RSLVR_FK2;
ALTER TABLE KRMS_TERM_RSLVR_T DROP COLUMN CNTXT_ID;

-- remove fk from krms_term_spec_t to krms_cntxt_t
ALTER TABLE KRMS_TERM_SPEC_T ADD COLUMN NMSPC_CD VARCHAR(40) NOT NULL;
ALTER TABLE KRMS_TERM_SPEC_T DROP FOREIGN KEY KRMS_ASSET_FK1;
ALTER TABLE KRMS_TERM_SPEC_T DROP KEY KRMS_ASSET_TI1;
ALTER TABLE KRMS_TERM_SPEC_T DROP INDEX KRMS_ASSET_TC1;
ALTER TABLE KRMS_TERM_SPEC_T ADD CONSTRAINT KRMS_TERM_SPEC_TC1 UNIQUE (NM, NMSPC_CD);
ALTER TABLE KRMS_TERM_SPEC_T DROP COLUMN CNTXT_ID;

--
-- refactor krms_cntxt_term_spec_prereq_t to be a valid term specs table instead
--
-- rename krms_cntxt_term_spec_prereq_t to krms_cntxt_vld_term_spec_t
-- and add prereq column
ALTER TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_T DROP FOREIGN KEY KRMS_CNTXT_ASSET_PREREQ_FK1;
ALTER TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_T DROP INDEX KRMS_CNTXT_ASSET_PREREQ_TI1;
ALTER TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_T DROP FOREIGN KEY KRMS_CNTXT_ASSET_PREREQ_FK2;
ALTER TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_T DROP INDEX KRMS_CNTXT_ASSET_PREREQ_TI2;
RENAME TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_T TO KRMS_CNTXT_VLD_TERM_SPEC_T;
ALTER TABLE KRMS_CNTXT_VLD_TERM_SPEC_T ADD COLUMN PREREQ VARCHAR(1) DEFAULT 'n';
ALTER TABLE KRMS_CNTXT_VLD_TERM_SPEC_T ADD CONSTRAINT KRMS_CNTXT_VLD_TERM_SPEC_TI1 FOREIGN KEY (CNTXT_ID) REFERENCES KRMS_CNTXT_T(CNTXT_ID);
ALTER TABLE KRMS_CNTXT_VLD_TERM_SPEC_T ADD CONSTRAINT KRMS_CNTXT_VLD_TERM_SPEC_TI2 FOREIGN KEY (TERM_SPEC_ID) REFERENCES KRMS_TERM_SPEC_T(TERM_SPEC_ID);

--
-- set up some missing unique constraints
--
-- wow, Oracle and MySQL support the same syntax here
ALTER TABLE KRMS_CNTXT_T ADD CONSTRAINT KRMS_CNTXT_TC1 UNIQUE (NM, NMSPC_CD);
ALTER TABLE KRMS_FUNC_T ADD CONSTRAINT KRMS_FUNC_TC1 UNIQUE (NM, NMSPC_CD);

-- drop namespace code from krms_agenda_t
ALTER TABLE KRMS_AGENDA_T DROP COLUMN NMSPC_CD;
ALTER TABLE KRMS_AGENDA_T ADD CONSTRAINT KRMS_AGENDA_TC1 UNIQUE (NM, CNTXT_ID);

ALTER TABLE KRMS_TYP_T ADD CONSTRAINT KRMS_TYP_TC1 UNIQUE (NM, NMSPC_CD);
ALTER TABLE KRMS_ATTR_DEFN_T ADD CONSTRAINT KRMS_ATTR_DEFN_TC1 UNIQUE (NM, NMSPC_CD);
ALTER TABLE KRMS_RULE_T ADD CONSTRAINT KRMS_RULE_TC1 UNIQUE (NM, NMSPC_CD);

--
-- clean up some crufty index and constraint names
--

ALTER TABLE KRMS_TERM_RSLVR_ATTR_T DROP FOREIGN KEY KRMS_ASSET_RSLVR_ATTR_FK1;
ALTER TABLE KRMS_TERM_RSLVR_ATTR_T DROP FOREIGN KEY KRMS_ASSET_RSLVR_ATTR_FK2;
ALTER TABLE KRMS_TERM_RSLVR_ATTR_T DROP INDEX KRMS_ASSET_RSLVR_ATTR_TI1;
CREATE INDEX KRMS_ASSET_RSLVR_ATTR_TI1 ON KRMS_TERM_RSLVR_ATTR_T (TERM_RSLVR_ID);
ALTER TABLE KRMS_TERM_RSLVR_ATTR_T DROP INDEX KRMS_ASSET_RSLVR_ATTR_TI2;
CREATE INDEX KRMS_TERM_RSLVR_ATTR_TI2 ON KRMS_TERM_RSLVR_ATTR_T (ATTR_DEFN_ID);
ALTER TABLE KRMS_TERM_RSLVR_ATTR_T ADD CONSTRAINT KRMS_TERM_RSLVR_ATTR_FK1 FOREIGN KEY (TERM_RSLVR_ID) REFERENCES KRMS_TERM_RSLVR_T (TERM_RSLVR_ID);
ALTER TABLE KRMS_TERM_RSLVR_ATTR_T ADD CONSTRAINT KRMS_TERM_RSLVR_ATTR_FK2 FOREIGN KEY (ATTR_DEFN_ID) REFERENCES KRMS_ATTR_DEFN_T (ATTR_DEFN_ID);


-- 
-- mysql-2011-08-11.sql
-- 



-- DROP TABLE IF EXISTS KREW_PPL_FLW_ATTR_T ;
-- DROP TABLE IF EXISTS KREW_PPL_FLW_MBR_T ;
-- DROP TABLE IF EXISTS KREW_TYP_ATTR_T ;
-- DROP TABLE IF EXISTS KREW_ATTR_DEFN_T ;
-- DROP TABLE IF EXISTS KREW_PPL_FLW_T ;
-- DROP TABLE IF EXISTS KREW_TYP_T ;
-- DROP TABLE IF EXISTS KREW_PPL_FLW_MBR_S ;
-- DROP TABLE IF EXISTS KREW_PPL_FLW_ATTR_S ;
-- DROP TABLE IF EXISTS KREW_PPL_FLW_S ;
-- DROP TABLE IF EXISTS KREW_ATTR_DEFN_S ;
-- DROP TABLE IF EXISTS KREW_TYP_ATTR_S ;
-- DROP TABLE IF EXISTS KREW_TYP_S ;


-- -----------------------------------------------------
-- Table KREW_TYP_T
-- -----------------------------------------------------

CREATE  TABLE KREW_TYP_T (
  TYP_ID VARCHAR(40) NOT NULL ,
  NM VARCHAR(100) NOT NULL ,
  NMSPC_CD VARCHAR(40) NOT NULL ,
  SRVC_NM VARCHAR(200) NULL ,
  ACTV VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (TYP_ID) )
ENGINE = InnoDB;

CREATE UNIQUE INDEX KREW_TYP_TC1 ON KREW_TYP_T (NM, NMSPC_CD) ;


-- -----------------------------------------------------
-- Table KREW_PPL_FLW_T
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_T (
  PPL_FLW_ID VARCHAR(40) NOT NULL ,
  NM VARCHAR(100) NOT NULL ,
  NMSPC_CD VARCHAR(40) NOT NULL ,
  TYP_ID VARCHAR(40) NOT NULL ,
  ACTV VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  DESC_TXT VARCHAR(4000) NULL ,
  PRIMARY KEY (PPL_FLW_ID) ,
  CONSTRAINT KREW_PPL_FLW_FK1
    FOREIGN KEY (TYP_ID )
    REFERENCES KREW_TYP_T (TYP_ID ))
ENGINE = InnoDB;

CREATE UNIQUE INDEX KREW_PPL_FLW_TC1 ON KREW_PPL_FLW_T (NM, NMSPC_CD) ;

CREATE INDEX KREW_PPL_FLW_TI1 ON KREW_PPL_FLW_T (TYP_ID) ;


-- -----------------------------------------------------
-- Table KREW_ATTR_DEFN_T
-- -----------------------------------------------------

CREATE  TABLE KREW_ATTR_DEFN_T (
  ATTR_DEFN_ID VARCHAR(40) NOT NULL ,
  NM VARCHAR(100) NOT NULL ,
  NMSPC_CD VARCHAR(40) NOT NULL ,
  LBL VARCHAR(40) NULL ,
  ACTV VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  CMPNT_NM VARCHAR(100) NULL ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  DESC_TXT VARCHAR(40) NULL ,
  PRIMARY KEY (ATTR_DEFN_ID) )
ENGINE = InnoDB;

CREATE UNIQUE INDEX KREW_ATTR_DEFN_TC1 ON KREW_ATTR_DEFN_T (NM, NMSPC_CD) ;


-- -----------------------------------------------------
-- Table KREW_TYP_ATTR_T
-- -----------------------------------------------------

CREATE  TABLE KREW_TYP_ATTR_T (
  TYP_ATTR_ID VARCHAR(40) NOT NULL ,
  SEQ_NO DECIMAL(5,0) NOT NULL ,
  TYP_ID VARCHAR(40) NOT NULL ,
  ATTR_DEFN_ID VARCHAR(255) NOT NULL ,
  ACTV VARCHAR(1) NOT NULL DEFAULT 'Y' ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (TYP_ATTR_ID) ,
  CONSTRAINT KREW_TYP_ATTR_FK1
    FOREIGN KEY (ATTR_DEFN_ID )
    REFERENCES KREW_ATTR_DEFN_T (ATTR_DEFN_ID ),
  CONSTRAINT KREW_TYP_ATTR_FK2
    FOREIGN KEY (TYP_ID )
    REFERENCES KREW_TYP_T (TYP_ID ))
ENGINE = InnoDB;

CREATE INDEX KREW_TYP_ATTR_TI1 ON KREW_TYP_ATTR_T (ATTR_DEFN_ID) ;

CREATE INDEX KREW_TYP_ATTR_TI2 ON KREW_TYP_ATTR_T (TYP_ID) ;

CREATE UNIQUE INDEX KREW_TYP_ATTR_TC1 ON KREW_TYP_ATTR_T (TYP_ID, ATTR_DEFN_ID) ;


-- -----------------------------------------------------
-- Table KREW_PPL_FLW_MBR_T
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_MBR_T (
  PPL_FLW_MBR_ID VARCHAR(40) NOT NULL ,
  PPL_FLW_ID VARCHAR(40) NOT NULL ,
  MBR_TYP_CD VARCHAR(1) NOT NULL ,
  MBR_ID VARCHAR(40) NOT NULL ,
  PRIO DECIMAL(8,0) NULL ,
  DLGT_FRM_ID VARCHAR(40) NULL ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (PPL_FLW_MBR_ID) ,
  CONSTRAINT KREW_PPL_FLW_MBR_FK1
    FOREIGN KEY (PPL_FLW_ID )
    REFERENCES KREW_PPL_FLW_T (PPL_FLW_ID ),
  CONSTRAINT KREW_PPL_FLW_MBR_FK2
    FOREIGN KEY (DLGT_FRM_ID )
    REFERENCES KREW_PPL_FLW_MBR_T (PPL_FLW_MBR_ID ))
ENGINE = InnoDB;

CREATE INDEX KREW_PPL_FLW_MBR_TI1 ON KREW_PPL_FLW_MBR_T (PPL_FLW_ID) ;

CREATE INDEX KREW_PPL_FLW_MBR_TI2 ON KREW_PPL_FLW_MBR_T (PPL_FLW_ID, PRIO) ;

CREATE UNIQUE INDEX KREW_PPL_FLW_MBR_TC1 ON KREW_PPL_FLW_MBR_T (PPL_FLW_ID, MBR_TYP_CD, MBR_ID, DLGT_FRM_ID) ;

CREATE INDEX KREW_PPL_FLW_MBR_TI3 ON KREW_PPL_FLW_MBR_T (DLGT_FRM_ID) ;


-- -----------------------------------------------------
-- Table KREW_PPL_FLW_ATTR_T
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_ATTR_T (
  PPL_FLW_ATTR_ID VARCHAR(40) NOT NULL ,
  PPL_FLW_ID VARCHAR(40) NOT NULL ,
  ATTR_DEFN_ID VARCHAR(40) NOT NULL ,
  ATTR_VAL VARCHAR(400) NULL ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (PPL_FLW_ATTR_ID) ,
  CONSTRAINT KREW_PPL_FLW_ATTR_FK1
    FOREIGN KEY (PPL_FLW_ID )
    REFERENCES KREW_PPL_FLW_T (PPL_FLW_ID ),
  CONSTRAINT KREW_PPL_FLW_ATTR_FK2
    FOREIGN KEY (ATTR_DEFN_ID )
    REFERENCES KREW_ATTR_DEFN_T (ATTR_DEFN_ID ))
ENGINE = InnoDB;

CREATE INDEX KREW_PPL_FLW_ATTR_TI1 ON KREW_PPL_FLW_ATTR_T (PPL_FLW_ID) ;

CREATE INDEX KREW_PPL_FLW_ATTR_TI2 ON KREW_PPL_FLW_ATTR_T (ATTR_DEFN_ID) ;


-- -----------------------------------------------------
-- Table KREW_TYP_S
-- -----------------------------------------------------

CREATE  TABLE KREW_TYP_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;


-- -----------------------------------------------------
-- Table KREW_TYP_ATTR_S
-- -----------------------------------------------------

CREATE  TABLE KREW_TYP_ATTR_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;


-- -----------------------------------------------------
-- Table KREW_ATTR_DEFN_S
-- -----------------------------------------------------

CREATE  TABLE KREW_ATTR_DEFN_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;


-- -----------------------------------------------------
-- Table KREW_PPL_FLW_S
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;


-- -----------------------------------------------------
-- Table KREW_PPL_FLW_ATTR_S
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_ATTR_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;


-- -----------------------------------------------------
-- Table KREW_PPL_FLW_MBR_S
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_MBR_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;




-- 
-- mysql-2011-08-17.sql
-- 


DELETE FROM KRCR_PARM_T
WHERE NMSPC_CD = 'KR-NS'
AND CMPNT_CD = 'All'
AND PARM_NM IN ('STRING_TO_DATE_FORMATS', 'STRING_TO_TIMESTAMP_FORMATS', 'TIMESTAMP_TO_STRING_FORMAT_FOR_USER_INTERFACE', 'DATE_TO_STRING_FORMAT_FOR_FILE_NAME', 'TIMESTAMP_TO_STRING_FORMAT_FOR_FILE_NAME')
;


-- 
-- mysql-2011-08-29.sql
-- 


DELETE FROM KRCR_PARM_T WHERE PARM_NM = 'CACHING_IND'
;


-- 
-- mysql-2011-09-07.sql
-- 


-- KULRICE-5360 rename KIM entity fields
ALTER TABLE KRIM_ENTITY_NM_T CHANGE TITLE_NM PREFIX_NM VARCHAR(20);

ALTER TABLE KRIM_ENTITY_BIO_T  CHANGE BIRTH_STATE_CD BIRTH_STATE_PVC_CD VARCHAR(2);

ALTER TABLE KRIM_ENTITY_ADDR_T CHANGE POSTAL_STATE_CD STATE_PVC_CD VARCHAR(2);
ALTER TABLE KRIM_ENTITY_ADDR_T CHANGE CITY_NM CITY VARCHAR(30);

ALTER TABLE KRIM_PND_NM_MT CHANGE TITLE_NM PREFIX_NM VARCHAR(20);

ALTER TABLE KRIM_PND_ADDR_MT CHANGE POSTAL_STATE_CD STATE_PVC_CD VARCHAR(2);

ALTER TABLE KRIM_PND_ADDR_MT CHANGE CITY_NM CITY VARCHAR(30);




-- 
-- mysql-2011-09-15.sql
-- 


DELETE FROM KREW_USR_OPTN_T WHERE PRSN_OPTN_ID LIKE 'DocSearch%';




-- 
-- mysql-2011-09-16.sql
-- 


-- KULRICE-5360 add KIM entity fields
ALTER TABLE KRIM_ENTITY_NM_T ADD COLUMN TITLE_NM VARCHAR(20);
ALTER TABLE KRIM_ENTITY_NM_T ADD COLUMN NOTE_MSG VARCHAR(1024);
ALTER TABLE KRIM_ENTITY_NM_T ADD COLUMN NM_CHNG_DT DATETIME;

ALTER TABLE KRIM_ENTITY_ADDR_T ADD COLUMN ATTN_LINE VARCHAR(45);
ALTER TABLE KRIM_ENTITY_ADDR_T ADD COLUMN ADDR_FMT VARCHAR(256);
ALTER TABLE KRIM_ENTITY_ADDR_T ADD COLUMN MOD_DT DATETIME;
ALTER TABLE KRIM_ENTITY_ADDR_T ADD COLUMN VALID_DT DATETIME;
ALTER TABLE KRIM_ENTITY_ADDR_T ADD COLUMN VALID_IND VARCHAR(1);
ALTER TABLE KRIM_ENTITY_ADDR_T ADD COLUMN NOTE_MSG VARCHAR(1024);

ALTER TABLE KRIM_ENTITY_BIO_T ADD COLUMN NOTE_MSG VARCHAR(1024);
ALTER TABLE KRIM_ENTITY_BIO_T ADD COLUMN GNDR_CHG_CD VARCHAR(20);

ALTER TABLE KRIM_PND_NM_MT ADD COLUMN TITLE_NM VARCHAR(20);
ALTER TABLE KRIM_PND_NM_MT ADD COLUMN NOTE_MSG VARCHAR(1024);
ALTER TABLE KRIM_PND_NM_MT ADD COLUMN NM_CHNG_DT DATETIME;

ALTER TABLE KRIM_PND_ADDR_MT ADD COLUMN ATTN_LINE VARCHAR(45);
ALTER TABLE KRIM_PND_ADDR_MT ADD COLUMN ADDR_FMT VARCHAR(256);
ALTER TABLE KRIM_PND_ADDR_MT ADD COLUMN MOD_DT DATETIME;
ALTER TABLE KRIM_PND_ADDR_MT ADD COLUMN VALID_DT DATETIME;
ALTER TABLE KRIM_PND_ADDR_MT ADD COLUMN VALID_IND VARCHAR(1);
ALTER TABLE KRIM_PND_ADDR_MT ADD COLUMN NOTE_MSG VARCHAR(1024);




-- 
-- mysql-2011-09-18.sql
-- 


ALTER TABLE KREW_PPL_FLW_T CHANGE TYP_ID TYP_ID VARCHAR(40) NULL;

ALTER TABLE KREW_PPL_FLW_MBR_T DROP FOREIGN KEY KREW_PPL_FLW_MBR_FK2;
ALTER TABLE KREW_PPL_FLW_MBR_T DROP KEY KREW_PPL_FLW_MBR_TI2;
ALTER TABLE KREW_PPL_FLW_MBR_T DROP COLUMN DLGT_FRM_ID;

DROP INDEX KREW_PPL_FLW_MBR_TC1 ON KREW_PPL_FLW_MBR_T;

-- DROP INDEX KREW_PPL_FLW_MBR_FK2 ON KREW_PPL_FLW_MBR_T;

-- ALTER TABLE KREW_PPL_FLW_MBR_T DROP FOREIGN KEY KREW_PPL_FLW_MBR_FK2;

-- -----------------------------------------------------
-- Table KREW_PPL_FLW_DLGT_T
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_DLGT_T (
  PPL_FLW_DLGT_ID VARCHAR(40) NOT NULL ,
  PPL_FLW_MBR_ID VARCHAR(40) NOT NULL ,
  MBR_ID VARCHAR(40) NOT NULL ,
  MBR_TYP_CD VARCHAR(1) NOT NULL ,
  DLGN_TYP_CD VARCHAR(1) NOT NULL ,
  VER_NBR DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (PPL_FLW_DLGT_ID) ,
  CONSTRAINT KREW_PPL_FLW_DLGT_FK1
    FOREIGN KEY (PPL_FLW_MBR_ID )
    REFERENCES KREW_PPL_FLW_MBR_T (PPL_FLW_MBR_ID ))
ENGINE = InnoDB;

CREATE INDEX KREW_PPL_FLW_DLGT_TI1 ON KREW_PPL_FLW_DLGT_T (PPL_FLW_MBR_ID) ;

-- -----------------------------------------------------
-- Table KREW_PPL_FLW_DLGT_S
-- -----------------------------------------------------

CREATE  TABLE KREW_PPL_FLW_DLGT_S (
  ID BIGINT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (ID) )
ENGINE = MyISAM
AUTO_INCREMENT = 10000;




-- 
-- mysql-2011-09-26b.sql
-- 


-- KIM permissions
INSERT INTO KRCR_NMSPC_T
(NMSPC_CD, NM, ACTV_IND, APPL_ID, VER_NBR, OBJ_ID)
VALUES ('KR-RULE','Kuali Rules','Y','RICE',1,UUID())
;

INSERT INTO KRIM_PERM_TMPL_T
(PERM_TMPL_ID, NM, NMSPC_CD, DESC_TXT, KIM_TYP_ID, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT PERM_TMPL_ID FROM
        (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000)
        AS TMPTABLE),
        'KRMS Agenda Permission','KR-RULE','View/Maintain Agenda',
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Namespace' AND NMSPC_CD = 'KR-NS'),
        'Y',1,UUID())
;

INSERT INTO KRIM_PERM_T
(PERM_ID, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT PERM_ID FROM
        (SELECT (MAX(CAST(PERM_ID AS DECIMAL)) + 1) AS PERM_ID FROM KRIM_PERM_T WHERE PERM_ID IS NOT NULL AND PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_ID AS DECIMAL) < 10000)
        AS TMPTABLE),
        (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE NM = 'KRMS Agenda Permission' AND NMSPC_CD = 'KR-RULE'),
        'KR-RULE','Maintain KRMS Agenda','Allows creation and modification of agendas via the agenda editor','Y',1,UUID())
;

INSERT INTO KRIM_PERM_ATTR_DATA_T
(ATTR_DATA_ID, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL, VER_NBR, OBJ_ID)
VALUES ((SELECT ATTR_DATA_ID FROM
        (SELECT (MAX(CAST(ATTR_DATA_ID AS DECIMAL)) + 1) AS ATTR_DATA_ID FROM KRIM_PERM_ATTR_DATA_T WHERE ATTR_DATA_ID IS NOT NULL AND ATTR_DATA_ID REGEXP '^[1-9][0-9]*$' AND CAST(ATTR_DATA_ID AS DECIMAL) < 10000)
        AS TMPTABLE),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Maintain KRMS Agenda' AND NMSPC_CD = 'KR-RULE'),
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Namespace' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NM = 'namespaceCode'),
        'KRMS_TEST',1,UUID())
;

-- KIM roles
INSERT INTO KRIM_ROLE_T
(ROLE_ID, ROLE_NM, NMSPC_CD, DESC_TXT, KIM_TYP_ID, ACTV_IND, LAST_UPDT_DT, OBJ_ID)
VALUES ((SELECT ROLE_ID FROM
        (SELECT (MAX(CAST(ROLE_ID AS DECIMAL)) + 1) AS ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_ID IS NOT NULL AND ROLE_ID REGEXP '^[1-9][0-9]*$' AND CAST(ROLE_ID AS DECIMAL) < 10000)
        AS TMPTABLE),
        'Kuali Rules Management System Administrator',
        'KR-RULE',
        'This role maintains KRMS agendas and rules.',
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Default' AND NMSPC_CD = 'KUALI'),
        'Y', CURDATE(), UUID())
;

INSERT INTO KRIM_ROLE_MBR_T
(ROLE_MBR_ID, ROLE_ID, MBR_ID, MBR_TYP_CD, LAST_UPDT_DT, VER_NBR, OBJ_ID)
VALUES ((SELECT ROLE_MBR_ID FROM
        (SELECT (MAX(CAST(ROLE_MBR_ID AS DECIMAL)) + 1) AS ROLE_MBR_ID FROM KRIM_ROLE_MBR_T WHERE ROLE_MBR_ID IS NOT NULL AND ROLE_MBR_ID REGEXP '^[1-9][0-9]*$' AND CAST(ROLE_MBR_ID AS DECIMAL) < 10000)
        AS TMPTABLE),
        (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'Kuali Rules Management System Administrator' AND NMSPC_CD = 'KR-RULE'),
        (SELECT PRNCPL_ID FROM KRIM_PRNCPL_T WHERE PRNCPL_NM = 'admin'),
        'P', CURDATE(), 1, UUID())
;


-- 
-- mysql-2011-09-26.sql
-- 


ALTER TABLE KREW_DOC_TYP_T DROP COLUMN CSTM_ACTN_LIST_ATTRIB_CLS_NM;
ALTER TABLE KREW_DOC_TYP_T DROP COLUMN CSTM_ACTN_EMAIL_ATTRIB_CLS_NM;
ALTER TABLE KREW_DOC_TYP_T DROP COLUMN CSTM_DOC_NTE_ATTRIB_CLS_NM;


-- 
-- mysql-2011-09-30.sql
-- 



-- -----------------------------------------------------
-- Table `KRMS_CNTXT_VLD_AGENDA_T`
-- -----------------------------------------------------


CREATE  TABLE IF NOT EXISTS `KRMS_CNTXT_VLD_AGENDA_T` (
  `CNTXT_VLD_AGENDA_ID` VARCHAR(40) NOT NULL ,
  `CNTXT_ID` VARCHAR(40) NOT NULL ,
  `AGENDA_TYP_ID` VARCHAR(40) NOT NULL ,
  `VER_NBR` DECIMAL NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`CNTXT_VLD_AGENDA_ID`) ,
  INDEX `KRMS_CNTXT_VLD_AGENDA_TI1` (`CNTXT_ID` ASC) ,
  CONSTRAINT `KRMS_CNTXT_VLD_AGENDA_FK1`
    FOREIGN KEY (`CNTXT_ID` )
    REFERENCES `KRMS_CNTXT_T` (`CNTXT_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE KRMS_CNTXT_VLD_AGENDA_S ( 
  ID BIGINT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY (ID) 
) ENGINE MyISAM; 
ALTER TABLE KRMS_CNTXT_VLD_AGENDA_S AUTO_INCREMENT = 1000;


-- 
-- mysql-2011-10-03.sql
-- 


ALTER TABLE KREW_PPL_FLW_MBR_T ADD COLUMN ACTN_RQST_PLCY_CD VARCHAR(1);
ALTER TABLE KREW_PPL_FLW_MBR_T ADD COLUMN RSP_ID VARCHAR(40) NOT NULL;

ALTER TABLE KREW_PPL_FLW_DLGT_T ADD COLUMN ACTN_RQST_PLCY_CD VARCHAR(1);
ALTER TABLE KREW_PPL_FLW_DLGT_T ADD COLUMN RSP_ID VARCHAR(40) NOT NULL;



-- 
-- mysql-2011-10-21.sql
-- 


-- KULRICE-5348
ALTER TABLE KREW_RULE_T CHANGE PREV_RULE_VER_NBR PREV_VER_RULE_ID VARCHAR(40);

-- KULRICE-4589
UPDATE KRCR_PARM_T
SET PARM_NM='NOTIFY_GROUPS',
    PARM_DESC_TXT='Defines a group name (in the format "namespace:name") which contains members who should never receive "notifications" action requests from KEW.',
    EVAL_OPRTR_CD='D'
WHERE NMSPC_CD = 'KR-WKFLW'
  AND CMPNT_CD = 'Notification'
  AND PARM_NM = 'NOTIFY_EXCLUDED_USERS_IND';


-- 
-- mysql-2011-10-23.sql
-- 


ALTER TABLE KRCR_CMPNT_T ADD COLUMN CMPNT_SET_ID VARCHAR(40);

CREATE TABLE KRCR_CMPNT_SET_T (
  CMPNT_SET_ID VARCHAR(40) NOT NULL,
  LAST_UPDT_TS DATETIME NOT NULL,
  CHKSM VARCHAR(40) NOT NULL,
  VER_NBR DECIMAL NOT NULL DEFAULT 0,
  PRIMARY KEY (CMPNT_SET_ID))
ENGINE = InnoDB;


-- 
-- mysql-2011-10-24.sql
-- 


ALTER TABLE KRCR_CMPNT_T DROP COLUMN CMPNT_SET_ID;

CREATE TABLE KRCR_DRVD_CMPNT_T (
  NMSPC_CD VARCHAR(20) NOT NULL,
  CMPNT_CD VARCHAR(100) NOT NULL,
  NM VARCHAR(255),
  CMPNT_SET_ID VARCHAR(40) NOT NULL,
  PRIMARY KEY (NMSPC_CD, CMPNT_CD))
ENGINE = InnoDB;



-- 
-- mysql-2011-10-25.sql
-- 


UPDATE KREW_RULE_ATTR_T SET RULE_ATTR_TYP_CD='DocumentSecurityAttribute' WHERE RULE_ATTR_TYP_CD='DocumentSearchSecurityFilterAttribute';

UPDATE KRCR_PARM_T SET CMPNT_CD='DocumentSearch' WHERE CMPNT_CD='DocSearchCriteriaDTO';
INSERT INTO KRCR_CMPNT_T (NMSPC_CD, CMPNT_CD, NM, ACTV_IND, OBJ_ID, VER_NBR)
VALUES ('KR-WKFLW', 'DocumentSearch', 'Document Search', 'Y', UUID(), 1);



-- 
-- mysql-2011-10-26.sql
-- 


INSERT INTO KRCR_CMPNT_T (NMSPC_CD, CMPNT_CD, NM, ACTV_IND, OBJ_ID, VER_NBR)
VALUES ('KR-WKFLW', 'Rule', 'Rule', 'Y', UUID(), 1);
UPDATE KRCR_CMPNT_T SET CMPNT_CD='EDocLite' WHERE CMPNT_CD LIKE 'EDocLite%';


-- 
-- mysql-2011-10-27.sql
-- 


-- create a KIM permission for the Cache Administrator screen/controller

INSERT INTO KRIM_PERM_T
(PERM_ID, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT PERM_ID FROM
          (SELECT (MAX(CAST(PERM_ID AS DECIMAL)) + 1) AS PERM_ID FROM KRIM_PERM_T WHERE PERM_ID IS NOT NULL AND PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE NM = 'Use Screen' AND NMSPC_CD = 'KR-NS'),
        'KR-SYS','Use Cache Adminstration Screen','Allows use of the cache administration screen','Y',1,UUID());

INSERT INTO KRIM_PERM_ATTR_DATA_T
(ATTR_DATA_ID, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL, VER_NBR, OBJ_ID)
VALUES ((SELECT ATTR_DATA_ID FROM
          (SELECT (MAX(CAST(ATTR_DATA_ID AS DECIMAL)) + 1) AS ATTR_DATA_ID FROM KRIM_PERM_ATTR_DATA_T WHERE ATTR_DATA_ID IS NOT NULL AND ATTR_DATA_ID REGEXP '^[1-9][0-9]*$' AND CAST(ATTR_DATA_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Use Cache Adminstration Screen' AND NMSPC_CD = 'KR-SYS'),
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Namespace or Action' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NM = 'actionClass'),
        'org.kuali.rice.core.web.cache.CacheAdminController',1,UUID());

INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, ROLE_ID, PERM_ID, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT ROLE_PERM_ID FROM
          (SELECT (MAX(CAST(ROLE_PERM_ID AS DECIMAL)) + 1) AS ROLE_PERM_ID FROM KRIM_ROLE_PERM_T WHERE ROLE_PERM_ID IS NOT NULL AND ROLE_PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(ROLE_PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'Technical Administrator' AND NMSPC_CD = 'KR-SYS'),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Use Cache Adminstration Screen' AND NMSPC_CD = 'KR-SYS'),
        'Y', 1, UUID());



-- 
-- mysql-2011-11-03.sql
-- 


-- Make typ_id column optional where appropriate

ALTER TABLE KRMS_RULE_T MODIFY TYP_ID VARCHAR(40) DEFAULT NULL;
ALTER TABLE KRMS_AGENDA_T MODIFY TYP_ID VARCHAR(40) DEFAULT NULL;
ALTER TABLE KRMS_CNTXT_T MODIFY TYP_ID VARCHAR(40) DEFAULT NULL;



-- 
-- mysql-2011-11-14.sql
-- 


-- Drop foreign key constraint on krms_prop_t table
ALTER TABLE KRMS_PROP_T DROP FOREIGN KEY KRMS_PROP_FK1;




-- 
-- mysql-2011-11-23.sql
-- 


-- give PeopleFlows friendlier names

UPDATE KRMS_TYP_T SET NM='Notify PeopleFlow' WHERE TYP_ID = '1000';
UPDATE KRMS_TYP_T SET NM='Route to PeopleFlow' WHERE TYP_ID = '1001';

-- remove constraint that is preventing compound props from persisting

ALTER TABLE KRMS_CMPND_PROP_PROPS_T MODIFY SEQ_NO DECIMAL(5,0) DEFAULT NULL;



-- 
-- mysql-2011-11-28.sql
-- 


UPDATE KRIM_PERM_T
   SET NMSPC_CD = 'KRMS_TEST'
 WHERE NM = 'Maintain KRMS Agenda'
   AND NMSPC_CD = 'KR-RULE'
;

DELETE FROM KRIM_PERM_ATTR_DATA_T
 WHERE PERM_ID = (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Maintain KRMS Agenda' AND NMSPC_CD = 'KRMS_TEST')
;


-- 
-- mysql-2011-11-29.sql
-- 


ALTER TABLE KREW_RTE_NODE_T MODIFY ACTVN_TYP VARCHAR(1);


-- 
-- mysql-2011-12-07.sql
-- 



-- correct fields in krms test data
UPDATE KRMS_PROP_T SET CMPND_OP_CD = '&' WHERE CMPND_OP_CD = 'a';
UPDATE KRMS_CMPND_PROP_PROPS_T SET SEQ_NO = '2' WHERE PROP_ID = 'P421C';
UPDATE KRMS_CMPND_PROP_PROPS_T SET SEQ_NO = '3' WHERE PROP_ID = 'P421D';
UPDATE KRMS_CMPND_PROP_PROPS_T SET SEQ_NO = '3' WHERE PROP_ID = 'P502C';

-- move seq_no column from krms_cmpnd_prop_props_t pivot table to krms_prop_t table.
ALTER TABLE KRMS_PROP_T ADD COLUMN CMPND_SEQ_NO DECIMAL(5,0) DEFAULT NULL;

UPDATE KRMS_PROP_T, KRMS_CMPND_PROP_PROPS_T SET KRMS_PROP_T.CMPND_SEQ_NO = KRMS_CMPND_PROP_PROPS_T.SEQ_NO
WHERE KRMS_PROP_T.PROP_ID = KRMS_CMPND_PROP_PROPS_T.PROP_ID;

ALTER TABLE KRMS_CMPND_PROP_PROPS_T DROP SEQ_NO;



-- 
-- mysql-2011-12-21.sql
-- 


UPDATE KRCR_NMSPC_T SET APPL_ID = 'RICE' WHERE NMSPC_CD = 'KUALI';


-- 
-- mysql-2012-01-03.sql
-- 


INSERT INTO KRCR_NMSPC_T VALUES ('KR-KRAD', UUID(), 1, 'Kuali Rapid Application Development', 'Y', 'RICE');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'viewId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'actionEvent', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'collectionPropertyName', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'fieldId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'groupId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'widgetId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_ATTR_DEFN_T VALUES ((SELECT KIM_ATTR_DEFN_ID FROM (SELECT (MAX(CAST(KIM_ATTR_DEFN_ID AS DECIMAL)) + 1) AS KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID IS NOT NULL AND KIM_ATTR_DEFN_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_ATTR_DEFN_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'actionId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View', 'viewPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Edit Mode', 'viewEditModePermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Field', 'viewFieldPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Group', 'viewGroupPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Widget', 'viewWidgetPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Action', 'viewActionPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Line Field', 'viewLineFieldPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_T VALUES ((SELECT KIM_TYP_ID FROM (SELECT (MAX(CAST(KIM_TYP_ID AS DECIMAL)) + 1) AS KIM_TYP_ID FROM KRIM_TYP_T WHERE KIM_TYP_ID IS NOT NULL AND KIM_TYP_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'View Line Action', 'viewLineActionPermissionTypeService', 'Y', 'KR-KRAD');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Edit Mode'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Edit Mode'), '10', 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Field'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Field'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='fieldId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'c', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Field'), '6', 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='groupId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'c', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='fieldId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Widget'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Widget'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='widgetId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='actionId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'c', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='actionEvent'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='groupId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'c', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='collectionPropertyName'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'd', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='fieldId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'e', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), '6', 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'a', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='viewId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'b', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='groupId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'c', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='collectionPropertyName'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'd', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='actionId'), 'Y');

INSERT INTO KRIM_TYP_ATTR_T VALUES ((SELECT KIM_TYP_ATTR_ID FROM (SELECT (MAX(CAST(KIM_TYP_ATTR_ID AS DECIMAL)) + 1) AS KIM_TYP_ATTR_ID FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ATTR_ID IS NOT NULL AND KIM_TYP_ATTR_ID REGEXP '^[1-9][0-9]*$' AND CAST(KIM_TYP_ATTR_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'e', (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Action'), (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NMSPC_CD='KR-KRAD' AND NM='actionEvent'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Open View', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Edit View', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Use View', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Edit Mode'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'View Field', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Field'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Edit Field', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Field'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'View Group', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Edit Group', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'View Widget', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Widget'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Edit Widget', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Widget'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Perform Action', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Action'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'View Line', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Edit Line', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Group'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'View Line Field', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Edit Line Field', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Field'), 'Y');

INSERT INTO KRIM_PERM_TMPL_T VALUES ((SELECT PERM_TMPL_ID FROM (SELECT (MAX(CAST(PERM_TMPL_ID AS DECIMAL)) + 1) AS PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE PERM_TMPL_ID IS NOT NULL AND PERM_TMPL_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_TMPL_ID AS DECIMAL) < 10000) AS TMPTABLE), UUID(), 1, 'KR-KRAD', 'Perform Line Action', null, (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NMSPC_CD='KR-KRAD' AND NM='View Line Action'), 'Y');




-- 
-- mysql-2012-01-04.sql
-- 


UPDATE KRMS_TERM_SPEC_T SET TYP = 'java.lang.String' WHERE TYP = 'T2';
UPDATE KRMS_TERM_SPEC_T SET TYP = 'java.lang.String' WHERE TYP = 'T1';
UPDATE KRMS_TERM_SPEC_T SET TYP = 'java.lang.Integer' WHERE TYP = 'T6';



-- 
-- mysql-2012-01-05.sql
-- 


ALTER TABLE KRMS_CNTXT_VLD_ACTN_T DROP FOREIGN KEY KRMS_CNTXT_VLD_ACTN_FK1;
DROP INDEX KRMS_CNTXT_VLD_ACTN_TI1 ON KRMS_CNTXT_VLD_ACTN_T;
RENAME TABLE KRMS_CNTXT_VLD_ACTN_S TO KRMS_CNTXT_VLD_ACTN_TYP_S;
RENAME TABLE KRMS_CNTXT_VLD_ACTN_T TO KRMS_CNTXT_VLD_ACTN_TYP_T;
CREATE INDEX KRMS_CNTXT_VLD_ACTN_TYP_TI1 ON KRMS_CNTXT_VLD_ACTN_TYP_T (CNTXT_ID);
ALTER TABLE KRMS_CNTXT_VLD_ACTN_TYP_T ADD CONSTRAINT KRMS_CNTXT_VLD_ACTN_TYP_FK1
  FOREIGN KEY (CNTXT_ID) REFERENCES KRMS_CNTXT_T (CNTXT_ID);

ALTER TABLE KRMS_CNTXT_VLD_AGENDA_T DROP FOREIGN KEY KRMS_CNTXT_VLD_AGENDA_FK1;
DROP INDEX KRMS_CNTXT_VLD_AGENDA_TI1 ON KRMS_CNTXT_VLD_AGENDA_T;
RENAME TABLE KRMS_CNTXT_VLD_AGENDA_S TO KRMS_CNTXT_VLD_AGENDA_TYP_S;
RENAME TABLE KRMS_CNTXT_VLD_AGENDA_T TO KRMS_CNTXT_VLD_AGENDA_TYP_T;
CREATE INDEX KRMS_CNTXT_VLD_AGENDA_TYP_TI1 ON KRMS_CNTXT_VLD_AGENDA_TYP_T (CNTXT_ID);
ALTER TABLE KRMS_CNTXT_VLD_AGENDA_TYP_T ADD CONSTRAINT KRMS_CNTXT_VLD_AGENDA_TYP_FK1
  FOREIGN KEY (CNTXT_ID) REFERENCES KRMS_CNTXT_T (CNTXT_ID);

ALTER TABLE KRMS_CNTXT_VLD_RULE_T DROP FOREIGN KEY KRMS_CNTXT_VLD_RULE_FK1;
DROP INDEX KRMS_CNTXT_VLD_RULE_TI1 ON KRMS_CNTXT_VLD_RULE_T;
RENAME TABLE KRMS_CNTXT_VLD_RULE_S TO KRMS_CNTXT_VLD_RULE_TYP_S;
RENAME TABLE KRMS_CNTXT_VLD_RULE_T TO KRMS_CNTXT_VLD_RULE_TYP_T;
CREATE INDEX KRMS_CNTXT_VLD_RULE_TYP_TI1 ON KRMS_CNTXT_VLD_RULE_TYP_T (CNTXT_ID);
ALTER TABLE KRMS_CNTXT_VLD_RULE_TYP_T ADD CONSTRAINT KRMS_CNTXT_VLD_RULE_TYP_FK1
  FOREIGN KEY (CNTXT_ID) REFERENCES KRMS_CNTXT_T (CNTXT_ID);

ALTER TABLE KRMS_CNTXT_VLD_RULE_TYP_T CHANGE RULE_ID RULE_TYP_ID VARCHAR(40) NOT NULL;

UPDATE KRMS_AGENDA_T SET TYP_ID = NULL WHERE TYP_ID = 'T5';
UPDATE KRMS_RULE_T SET TYP_ID = NULL;
DELETE FROM KRMS_CNTXT_VLD_RULE_TYP_T;


-- 
-- mysql-2012-01-06.sql
-- 


-- KULRICE-6299: New DB index to improve action list performance
CREATE INDEX KREW_ACTN_ITM_TI6 ON KREW_ACTN_ITM_T (DLGN_TYP, DLGN_PRNCPL_ID, DLGN_GRP_ID);


-- 
-- mysql-2012-01-11.sql
-- 


-- KULRICE-6452

DROP TABLE KRMS_CNTXT_VLD_EVENT_T;
DROP TABLE KRMS_CNTXT_VLD_EVENT_S;
RENAME TABLE KRMS_CNTXT_TERM_SPEC_PREREQ_S TO KRMS_CNTXT_VLD_TERM_SPEC_S;


-- 
-- mysql-2012-01-18.sql
-- 


ALTER TABLE KREW_DOC_HDR_T DROP COLUMN RTE_LVL_MDFN_DT;


-- 
-- mysql-2012-01-19b.sql
-- 



--
-- KULRICE-5856: KRNS_DOC_HDR_T.FDOC_DESC column is only 40 char
--

ALTER TABLE KRNS_DOC_HDR_T MODIFY FDOC_DESC VARCHAR(255);


--
-- KULRICE-6463: New DB Indexes for KIM Permission checks
--

CREATE INDEX KRIM_ROLE_PERM_TI2 ON KRIM_ROLE_PERM_T (PERM_ID, ACTV_IND);
CREATE INDEX KRIM_PERM_TI1 ON KRIM_PERM_T (PERM_TMPL_ID);
CREATE INDEX KRIM_PERM_TI2 ON KRIM_PERM_T (PERM_TMPL_ID, ACTV_IND);
CREATE INDEX KRIM_PERM_TMPL_TI1 ON KRIM_PERM_TMPL_T (NMSPC_CD, NM);
CREATE INDEX KRIM_ROLE_MBR_TI2 ON KRIM_ROLE_MBR_T (ROLE_ID, MBR_ID, MBR_TYP_CD);
CREATE INDEX KRIM_ROLE_MBR_TI3 ON KRIM_ROLE_MBR_T (MBR_ID, MBR_TYP_CD);


--
-- KRMS Sample (and production) Data
--

--
-- Copyright 2005-2012 The Kuali Foundation
--
--

-- Notification PeopleFlowActionType

INSERT INTO KRMS_TYP_T
(TYP_ID, NM, NMSPC_CD, SRVC_NM, ACTV, VER_NBR)
VALUES ('1000', 'Notify PeopleFlow', 'KR-RULE', 'notificationPeopleFlowActionTypeService', 'Y', 1)
;

-- Approval PeopleFlowActionType

INSERT INTO KRMS_TYP_T
(TYP_ID, NM, NMSPC_CD, SRVC_NM, ACTV, VER_NBR)
VALUES ('1001', 'Route to PeopleFlow', 'KR-RULE', 'approvalPeopleFlowActionTypeService', 'Y', 1)
;


-- add a PeopleFlow attribute to the PeopleFlow types
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, CMPNT_NM, DESC_TXT)
VALUES ('1000', 'peopleFlowId', 'KR-RULE', 'PeopleFlow', null,
'An identifier for a PeopleFlow')
;
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID) VALUES ('1000', 1, '1000', '1000');
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID) VALUES ('1001', 1, '1001', '1000');



-- General validation rule type
INSERT INTO KRMS_TYP_T (TYP_ID, NM, NMSPC_CD, SRVC_NM, ACTV, VER_NBR) VALUES('1002', 'Validation Rule', 'KR-RULE', 'validationRuleTypeService', 'Y', 1);

-- General validation action type
INSERT INTO KRMS_TYP_T (TYP_ID, NM, NMSPC_CD, SRVC_NM, ACTV, VER_NBR) VALUEs('1003', 'Validation Action', 'KR-RULE', 'validationActionTypeService', 'Y', 1);

-- Invalid rule
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, ACTV, CMPNT_NM, VER_NBR, DESC_TXT) VALUES ('1001', 'Invalid Rule', 'KR-RULE', 'Invalid Rule', 'Y', null, 1, 'If true, execute the action');

-- Valid rule
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, ACTV, CMPNT_NM, VER_NBR, DESC_TXT) VALUES ('1002', 'Valid Rule', 'KR-RULE', 'Valid Rule', 'Y', null, 1, 'If false, execute the action');

-- The General rule subtypes attributes
-- use same sequence number to prove that falling back to natural order when sequences are the same works.
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR) VALUES ('1002', 1, '1002', '1001', 'Y', 1);
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR) VALUES ('1003', 1, '1002', '1002', 'Y', 1);

-- warning action
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, ACTV, CMPNT_NM, VER_NBR, DESC_TXT) VALUES ('1003', 'Warning Action', 'KR-RULE', 'Warning Action', 'Y', null, 1, 'Warning');

-- error action
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, ACTV, CMPNT_NM, VER_NBR, DESC_TXT) VALUES ('1004', 'Error Action', 'KR-RULE', 'Error Action', 'Y', null, 1, 'Error');

-- action message
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, ACTV, CMPNT_NM, VER_NBR, DESC_TXT) VALUES ('1005', 'Action Message', 'KR-RULE', 'Action Message', 'Y', null, 1, 'Message validation action returns');

-- The General action type attribute
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR) VALUES ('1004', 1, '1003', '1003', 'Y', 1);
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR) VALUES ('1005', 2, '1003', '1004', 'Y', 1);
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR) VALUES ('1006', 3, '1003', '1005', 'Y', 1);



-- change permisison to use new krms test namespace
UPDATE KRIM_PERM_ATTR_DATA_T SET ATTR_VAL = 'KR-RULE-TEST' WHERE ATTR_VAL = 'KRMS_TEST';

UPDATE KRIM_PERM_T
   SET NMSPC_CD = 'KR-RULE-TEST'
 WHERE NM = 'Maintain KRMS Agenda'
   AND NMSPC_CD = 'KR-RULE'
;

UPDATE KRIM_PERM_T
   SET NMSPC_CD = 'KR-RULE-TEST'
 WHERE NM = 'Maintain KRMS Agenda'
   AND NMSPC_CD = 'KRMS_TEST'
;

DELETE FROM KRIM_PERM_ATTR_DATA_T
 WHERE PERM_ID = (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Maintain KRMS Agenda' AND NMSPC_CD = 'KRMS_TEST');


-- set sequence values up to 10000

ALTER TABLE KRMS_ACTN_ATTR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_ACTN_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_AGENDA_ATTR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_AGENDA_ITM_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_AGENDA_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_ATTR_DEFN_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CMPND_PROP_PROPS_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_ATTR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_VLD_ACTN_TYP_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_VLD_AGENDA_TYP_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_VLD_FUNC_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_VLD_RULE_TYP_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CNTXT_VLD_TERM_SPEC_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_CTGRY_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_FUNC_PARM_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_FUNC_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_PROP_PARM_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_PROP_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_RULE_ATTR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_RULE_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_PARM_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_RSLVR_ATTR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_RSLVR_INPUT_SPEC_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_RSLVR_PARM_SPEC_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_RSLVR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TERM_SPEC_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TYP_ATTR_S AUTO_INCREMENT = 10000;
ALTER TABLE KRMS_TYP_S AUTO_INCREMENT = 10000;



-- 
-- mysql-2012-01-19c.sql
-- 


-- KULRICE-6537 - increase size of MBR_NM field
ALTER TABLE KRIM_PND_GRP_MBR_T MODIFY MBR_NM VARCHAR(100);








-- 
-- mysql-2012-01-19.sql
-- 


ALTER TABLE KREW_STYLE_T CHANGE STYLE_ID STYLE_ID VARCHAR(40) NOT NULL;

RENAME TABLE KREW_STYLE_T TO KRCR_STYLE_T;


--
-- mysql-2010-01-24.sql
--


-- PeopleFlow Name
INSERT INTO KRMS_ATTR_DEFN_T (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, ACTV, CMPNT_NM, VER_NBR, DESC_TXT)
VALUES ('1006', 'peopleFlowName', 'KR_RULE', 'PeopleFlow Name', 'Y', null, 1, 'PeopleFlow Name')
;
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR)
VALUES ('1007', 3, '1000', '1006', 'Y', 1)
;
INSERT INTO KRMS_TYP_ATTR_T (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID, ACTV, VER_NBR)
VALUES ('1008', 3, '1001', '1006', 'Y', 1)
;


--
-- mysql-2010-01-31.sql
--


-- KULRICE-6481
ALTER TABLE KRIM_ROLE_PERM_T MODIFY ROLE_ID VARCHAR(40) NOT NULL
;

ALTER TABLE KRIM_ROLE_PERM_T MODIFY PERM_ID VARCHAR(40) NOT NULL
;

--
-- mysql-2012-02-08.sql
--

INSERT INTO KRIM_PERM_T
(PERM_ID, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT PERM_ID FROM
          (SELECT (MAX(CAST(PERM_ID AS DECIMAL)) + 1) AS PERM_ID FROM KRIM_PERM_T WHERE PERM_ID IS NOT NULL AND PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE NM = 'Create / Maintain Record(s)' AND NMSPC_CD = 'KR-NS'),
        'KR-NS','Create Term Maintenance Document','Allows user to create a new Term maintainence document','Y',1,
        '0dbce939-4f22-4e9b-a4bb-1615c0f411a2');

INSERT INTO KRIM_PERM_ATTR_DATA_T
(ATTR_DATA_ID, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL, VER_NBR, OBJ_ID)
VALUES ((SELECT ATTR_DATA_ID FROM
          (SELECT (MAX(CAST(ATTR_DATA_ID AS DECIMAL)) + 1) AS ATTR_DATA_ID FROM KRIM_PERM_ATTR_DATA_T WHERE ATTR_DATA_ID IS NOT NULL AND ATTR_DATA_ID REGEXP '^[1-9][0-9]*$' AND CAST(ATTR_DATA_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Create Term Maintenance Document' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Document Type & Existing Records Only' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NM = 'documentTypeName'),
        'TermMaintenanceDocument',1,'aa1d1400-6155-4819-8bad-e5dd81f9871b');

INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, ROLE_ID, PERM_ID, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT ROLE_PERM_ID FROM
          (SELECT (MAX(CAST(ROLE_PERM_ID AS DECIMAL)) + 1) AS ROLE_PERM_ID FROM KRIM_ROLE_PERM_T WHERE ROLE_PERM_ID IS NOT NULL AND ROLE_PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(ROLE_PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'Kuali Rules Management System Administrator' AND NMSPC_CD = 'KR-RULE'),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Create Term Maintenance Document' AND NMSPC_CD = 'KR-NS'),
        'Y', 1, '45f8f55e-23d9-4278-ade8-ddfc870852e6');


INSERT INTO KRIM_PERM_T
(PERM_ID, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT PERM_ID FROM
          (SELECT (MAX(CAST(PERM_ID AS DECIMAL)) + 1) AS PERM_ID FROM KRIM_PERM_T WHERE PERM_ID IS NOT NULL AND PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE NM = 'Create / Maintain Record(s)' AND NMSPC_CD = 'KR-NS'),
        'KR-NS','Create Context Maintenance Document','Allows user to create a new Context maintainence document','Y',1,
        'cefeed6d-b5e2-40aa-9034-137db317b532');

INSERT INTO KRIM_PERM_ATTR_DATA_T
(ATTR_DATA_ID, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL, VER_NBR, OBJ_ID)
VALUES ((SELECT ATTR_DATA_ID FROM
          (SELECT (MAX(CAST(ATTR_DATA_ID AS DECIMAL)) + 1) AS ATTR_DATA_ID FROM KRIM_PERM_ATTR_DATA_T WHERE ATTR_DATA_ID IS NOT NULL AND ATTR_DATA_ID REGEXP '^[1-9][0-9]*$' AND CAST(ATTR_DATA_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Create Context Maintenance Document' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Document Type & Existing Records Only' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NM = 'documentTypeName'),
        'ContextMaintenanceDocument',1,'c43bc7f5-949e-4a85-b173-6a53d81f2762');

INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, ROLE_ID, PERM_ID, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT ROLE_PERM_ID FROM
          (SELECT (MAX(CAST(ROLE_PERM_ID AS DECIMAL)) + 1) AS ROLE_PERM_ID FROM KRIM_ROLE_PERM_T WHERE ROLE_PERM_ID IS NOT NULL AND ROLE_PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(ROLE_PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'Kuali Rules Management System Administrator' AND NMSPC_CD = 'KR-RULE'),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Create Context Maintenance Document' AND NMSPC_CD = 'KR-NS'),
        'Y', 1, 'cd7cbc67-c0b2-4785-afa8-8c8d073b78df');

INSERT INTO KRIM_PERM_T
(PERM_ID, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT PERM_ID FROM
          (SELECT (MAX(CAST(PERM_ID AS DECIMAL)) + 1) AS PERM_ID FROM KRIM_PERM_T WHERE PERM_ID IS NOT NULL AND PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE NM = 'Create / Maintain Record(s)' AND NMSPC_CD = 'KR-NS'),
        'KR-NS','Create TermSpecification Maintenance Document','Allows user to create a new TermSpecification maintainence document','Y',1,
        '02bd9acd-48d9-4fec-acbd-6a441c5ea8c2');

INSERT INTO KRIM_PERM_ATTR_DATA_T
(ATTR_DATA_ID, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL, VER_NBR, OBJ_ID)
VALUES ((SELECT ATTR_DATA_ID FROM
          (SELECT (MAX(CAST(ATTR_DATA_ID AS DECIMAL)) + 1) AS ATTR_DATA_ID FROM KRIM_PERM_ATTR_DATA_T WHERE ATTR_DATA_ID IS NOT NULL AND ATTR_DATA_ID REGEXP '^[1-9][0-9]*$' AND CAST(ATTR_DATA_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Create TermSpecification Maintenance Document' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_TYP_ID FROM KRIM_TYP_T WHERE NM = 'Document Type & Existing Records Only' AND NMSPC_CD = 'KR-NS'),
        (SELECT KIM_ATTR_DEFN_ID FROM KRIM_ATTR_DEFN_T WHERE NM = 'documentTypeName'),
        'TermSpecificationMaintenanceDocument',1,'d3e373ca-296b-4834-bd66-ba159ebe733a');

INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, ROLE_ID, PERM_ID, ACTV_IND, VER_NBR, OBJ_ID)
VALUES ((SELECT ROLE_PERM_ID FROM
          (SELECT (MAX(CAST(ROLE_PERM_ID AS DECIMAL)) + 1) AS ROLE_PERM_ID FROM KRIM_ROLE_PERM_T WHERE ROLE_PERM_ID IS NOT NULL AND ROLE_PERM_ID REGEXP '^[1-9][0-9]*$' AND CAST(ROLE_PERM_ID AS DECIMAL) < 10000)
         AS TMPTABLE),
        (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'Kuali Rules Management System Administrator' AND NMSPC_CD = 'KR-RULE'),
        (SELECT PERM_ID FROM KRIM_PERM_T WHERE NM = 'Create TermSpecification Maintenance Document' AND NMSPC_CD = 'KR-NS'),
        'Y', 1, '83a270a0-1cdb-4440-ab8b-41cd8afc41d9');


--
-- mysql-2012-02-23.sql
--

--
-- KULRICE-6811: Conversion of WorkflowFunctions to EDLFunctions in eDocLite stylesheets
--

UPDATE KRCR_STYLE_T SET XML=REPLACE(XML,'org.kuali.rice.kew.edl.WorkflowFunctions','org.kuali.rice.edl.framework.util.EDLFunctions');